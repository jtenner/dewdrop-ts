// Bun Snapshot v1, https://bun.sh/docs/test/snapshots

exports[`1 matches snapshot: Expression: 1 1`] = `
{
  "ok": {
    "int": {
      "size": 32,
      "value": 1n,
    },
  },
}
`;

exports[`a matches snapshot: Expression: a 1`] = `
{
  "ok": {
    "name": "a",
  },
}
`;

exports[`"testing" matches snapshot: Expression: "testing" 1`] = `
{
  "ok": {
    "string": "testing",
  },
}
`;

exports[`a + b * c - d matches snapshot: Expression: a + b * c - d 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "infix": {
          "left": {
            "name": "a",
          },
          "op": "+",
          "right": {
            "infix": {
              "left": {
                "name": "b",
              },
              "op": "*",
              "right": {
                "name": "c",
              },
            },
          },
        },
      },
      "op": "-",
      "right": {
        "name": "d",
      },
    },
  },
}
`;

exports[`a + b + c + d matches snapshot: Expression: a + b + c + d 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "infix": {
          "left": {
            "infix": {
              "left": {
                "name": "a",
              },
              "op": "+",
              "right": {
                "name": "b",
              },
            },
          },
          "op": "+",
          "right": {
            "name": "c",
          },
        },
      },
      "op": "+",
      "right": {
        "name": "d",
      },
    },
  },
}
`;

exports[`a ** b ** c ** d matches snapshot: Expression: a ** b ** c ** d 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "**",
      "right": {
        "infix": {
          "left": {
            "name": "b",
          },
          "op": "**",
          "right": {
            "infix": {
              "left": {
                "name": "c",
              },
              "op": "**",
              "right": {
                "name": "d",
              },
            },
          },
        },
      },
    },
  },
}
`;

exports[`(a + b) * c matches snapshot: Expression: (a + b) * c 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "+",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`foo() matches snapshot: Expression: foo() 1`] = `
{
  "ok": {
    "call": [
      {
        "name": "foo",
      },
      [],
    ],
  },
}
`;

exports[`foo(1, 2, bar) matches snapshot: Expression: foo(1, 2, bar) 1`] = `
{
  "ok": {
    "call": [
      {
        "name": "foo",
      },
      [
        {
          "int": {
            "size": 32,
            "value": 1n,
          },
        },
        {
          "int": {
            "size": 32,
            "value": 2n,
          },
        },
        {
          "name": "bar",
        },
      ],
    ],
  },
}
`;

exports[`obj.field matches snapshot: Expression: obj.field 1`] = `
{
  "ok": {
    "select": [
      {
        "name": "obj",
      },
      {
        "name": "field",
      },
    ],
  },
}
`;

exports[`obj.method(x, y) matches snapshot: Expression: obj.method(x, y) 1`] = `
{
  "ok": {
    "call": [
      {
        "select": [
          {
            "name": "obj",
          },
          {
            "name": "method",
          },
        ],
      },
      [
        {
          "name": "x",
        },
        {
          "name": "y",
        },
      ],
    ],
  },
}
`;

exports[`MyType matches snapshot: Expression: MyType 1`] = `
{
  "ok": {
    "type": "MyType",
  },
}
`;

exports[`MyType() matches snapshot: Expression: MyType() 1`] = `
{
  "ok": {
    "call": [
      {
        "type": "MyType",
      },
      [],
    ],
  },
}
`;

exports[`#(1, 2, 3) matches snapshot: Expression: #(1, 2, 3) 1`] = `
{
  "ok": {
    "tuple": [
      {
        "int": {
          "size": 32,
          "value": 1n,
        },
      },
      {
        "int": {
          "size": 32,
          "value": 2n,
        },
      },
      {
        "int": {
          "size": 32,
          "value": 3n,
        },
      },
    ],
  },
}
`;

exports[`#{x: 1, y: 2} matches snapshot: Expression: #{x: 1, y: 2} 1`] = `
{
  "ok": {
    "record": [
      [
        {
          "name": "x",
        },
        {
          "int": {
            "size": 32,
            "value": 1n,
          },
        },
      ],
      [
        {
          "name": "y",
        },
        {
          "int": {
            "size": 32,
            "value": 2n,
          },
        },
      ],
    ],
  },
}
`;

exports[`{ a; b; c } matches snapshot: Expression: { a; b; c } 1`] = `
{
  "ok": {
    "block": [
      {
        "expression": {
          "name": "a",
        },
      },
      {
        "expression": {
          "name": "b",
        },
      },
      {
        "expression": {
          "name": "c",
        },
      },
    ],
  },
}
`;

exports[`{ let x = 1; x + 2 } matches snapshot: Expression: { let x = 1; x + 2 } 1`] = `
{
  "ok": {
    "block": [
      {
        "let_bind": {
          "assert": false,
          "expression": {
            "int": {
              "size": 32,
              "value": 1n,
            },
          },
          "pattern": {
            "name": "x",
          },
        },
      },
      {
        "expression": {
          "infix": {
            "left": {
              "name": "x",
            },
            "op": "+",
            "right": {
              "int": {
                "size": 32,
                "value": 2n,
              },
            },
          },
        },
      },
    ],
  },
}
`;

exports[`if a { b } else { c } matches snapshot: Expression: if a { b } else { c } 1`] = `
{
  "ok": {
    "if_expr": {
      "cond": {
        "name": "a",
      },
      "else_body": {
        "block": [
          {
            "expression": {
              "name": "c",
            },
          },
        ],
      },
      "if_body": {
        "block": [
          {
            "expression": {
              "name": "b",
            },
          },
        ],
      },
    },
  },
}
`;

exports[`if a { b } matches snapshot: Expression: if a { b } 1`] = `
{
  "ok": {
    "if_expr": {
      "cond": {
        "name": "a",
      },
      "else_body": null,
      "if_body": {
        "block": [
          {
            "expression": {
              "name": "b",
            },
          },
        ],
      },
    },
  },
}
`;

exports[`match x { A => 1, B => 2, _ => 3 } matches snapshot: Expression: match x { A => 1, B => 2, _ => 3 } 1`] = `
{
  "ok": {
    "match": [
      {
        "name": "x",
      },
      [
        {
          "body": {
            "int": {
              "size": 32,
              "value": 1n,
            },
          },
          "guard": null,
          "pattern": {
            "constr": {
              "patterns": [],
              "type": {
                "type": "A",
              },
            },
          },
        },
        {
          "body": {
            "int": {
              "size": 32,
              "value": 2n,
            },
          },
          "guard": null,
          "pattern": {
            "constr": {
              "patterns": [],
              "type": {
                "type": "B",
              },
            },
          },
        },
        {
          "body": {
            "int": {
              "size": 32,
              "value": 3n,
            },
          },
          "guard": null,
          "pattern": {
            "name": "_",
          },
        },
      ],
    ],
  },
}
`;

exports[`{ a <- try(explosion()) } matches snapshot: Expression: { a <- try(explosion()) } 1`] = `
{
  "ok": {
    "block": [
      {
        "arrow_bind": {
          "expression": {
            "call": [
              {
                "name": "try",
              },
              [
                {
                  "call": [
                    {
                      "name": "explosion",
                    },
                    [],
                  ],
                },
              ],
            ],
          },
          "name": {
            "name": "a",
          },
        },
      },
    ],
  },
}
`;

exports[`foo(1).bar(2, 3).baz matches snapshot: Expression: foo(1).bar(2, 3).baz 1`] = `
{
  "ok": {
    "select": [
      {
        "call": [
          {
            "select": [
              {
                "call": [
                  {
                    "name": "foo",
                  },
                  [
                    {
                      "int": {
                        "size": 32,
                        "value": 1n,
                      },
                    },
                  ],
                ],
              },
              {
                "name": "bar",
              },
            ],
          },
          [
            {
              "int": {
                "size": 32,
                "value": 2n,
              },
            },
            {
              "int": {
                "size": 32,
                "value": 3n,
              },
            },
          ],
        ],
      },
      {
        "name": "baz",
      },
    ],
  },
}
`;

exports[`if match x { A => true, _ => false } { 1 } else { 0 } matches snapshot: Expression: if match x { A => true, _ => false } { 1 } else { 0 } 1`] = `
{
  "ok": {
    "if_expr": {
      "cond": {
        "match": [
          {
            "name": "x",
          },
          [
            {
              "body": {
                "bool": true,
              },
              "guard": null,
              "pattern": {
                "constr": {
                  "patterns": [],
                  "type": {
                    "type": "A",
                  },
                },
              },
            },
            {
              "body": {
                "bool": false,
              },
              "guard": null,
              "pattern": {
                "name": "_",
              },
            },
          ],
        ],
      },
      "else_body": {
        "block": [
          {
            "expression": {
              "int": {
                "size": 32,
                "value": 0n,
              },
            },
          },
        ],
      },
      "if_body": {
        "block": [
          {
            "expression": {
              "int": {
                "size": 32,
                "value": 1n,
              },
            },
          },
        ],
      },
    },
  },
}
`;

exports[`x matches snapshot: PatternExpression: x 1`] = `
{
  "ok": {
    "name": "x",
  },
}
`;

exports[`_wild matches snapshot: PatternExpression: _wild 1`] = `
{
  "ok": {
    "name": "_wild",
  },
}
`;

exports[`Some matches snapshot: PatternExpression: Some 1`] = `
{
  "ok": {
    "constr": {
      "patterns": [],
      "type": {
        "type": "Some",
      },
    },
  },
}
`;

exports[`Some(42) matches snapshot: PatternExpression: Some(42) 1`] = `
{
  "ok": {
    "constr": {
      "patterns": [
        {
          "int": {
            "size": 32,
            "value": 42n,
          },
        },
      ],
      "type": {
        "type": "Some",
      },
    },
  },
}
`;

exports[`Pair(1, x) matches snapshot: PatternExpression: Pair(1, x) 1`] = `
{
  "ok": {
    "constr": {
      "patterns": [
        {
          "int": {
            "size": 32,
            "value": 1n,
          },
        },
        {
          "name": "x",
        },
      ],
      "type": {
        "type": "Pair",
      },
    },
  },
}
`;

exports[`123 matches snapshot: PatternExpression: 123 1`] = `
{
  "ok": {
    "int": {
      "size": 32,
      "value": 123n,
    },
  },
}
`;

exports[`3.14 matches snapshot: PatternExpression: 3.14 1`] = `
{
  "ok": {
    "float": {
      "size": 64,
      "value": 3.14,
    },
  },
}
`;

exports[`"hello" matches snapshot: PatternExpression: "hello" 1`] = `
{
  "ok": {
    "string": "hello",
  },
}
`;

exports[`nan matches snapshot: PatternExpression: nan 1`] = `
{
  "ok": {
    "float": {
      "size": 64,
      "value": NaN,
    },
  },
}
`;

exports[`inf matches snapshot: PatternExpression: inf 1`] = `
{
  "ok": {
    "float": {
      "size": 64,
      "value": Infinity,
    },
  },
}
`;

exports[`#(x, y) matches snapshot: PatternExpression: #(x, y) 1`] = `
{
  "ok": {
    "tuple": [
      {
        "name": "x",
      },
      {
        "name": "y",
      },
    ],
  },
}
`;

exports[`#(1, 2, 3) matches snapshot: PatternExpression: #(1, 2, 3) 1`] = `
{
  "ok": {
    "tuple": [
      {
        "int": {
          "size": 32,
          "value": 1n,
        },
      },
      {
        "int": {
          "size": 32,
          "value": 2n,
        },
      },
      {
        "int": {
          "size": 32,
          "value": 3n,
        },
      },
    ],
  },
}
`;

exports[`#() matches snapshot: PatternExpression: #() 1`] = `
{
  "ok": {
    "tuple": [],
  },
}
`;

exports[`#{foo: x, bar: 42} matches snapshot: PatternExpression: #{foo: x, bar: 42} 1`] = `
{
  "ok": {
    "record": [
      [
        {
          "name": "foo",
        },
        {
          "name": "x",
        },
      ],
      [
        {
          "name": "bar",
        },
        {
          "int": {
            "size": 32,
            "value": 42n,
          },
        },
      ],
    ],
  },
}
`;

exports[`#{nested: Pair(x, y)} matches snapshot: PatternExpression: #{nested: Pair(x, y)} 1`] = `
{
  "ok": {
    "record": [
      [
        {
          "name": "nested",
        },
        {
          "constr": {
            "patterns": [
              {
                "name": "x",
              },
              {
                "name": "y",
              },
            ],
            "type": {
              "type": "Pair",
            },
          },
        },
      ],
    ],
  },
}
`;

exports[`Some(#(x, #{y: 1})) matches snapshot: PatternExpression: Some(#(x, #{y: 1})) 1`] = `
{
  "ok": {
    "constr": {
      "patterns": [
        {
          "tuple": [
            {
              "name": "x",
            },
            {
              "record": [
                [
                  {
                    "name": "y",
                  },
                  {
                    "int": {
                      "size": 32,
                      "value": 1n,
                    },
                  },
                ],
              ],
            },
          ],
        },
      ],
      "type": {
        "type": "Some",
      },
    },
  },
}
`;

exports[`Int matches snapshot: TypeExpression: Int 1`] = `
{
  "ok": {
    "type": "Int",
  },
}
`;

exports[`MyNamespace.Type matches snapshot: TypeExpression: MyNamespace.Type 1`] = `
{
  "ok": {
    "select": {
      "name": {
        "type": "Type",
      },
      "root": {
        "type": "MyNamespace",
      },
    },
  },
}
`;

exports[`(Int) -> Bool matches snapshot: TypeExpression: (Int) -> Bool 1`] = `
{
  "ok": {
    "fn": {
      "args": [
        {
          "type": "Int",
        },
      ],
      "ret": {
        "type": "Bool",
      },
    },
  },
}
`;

exports[`(Int, String) -> Bool matches snapshot: TypeExpression: (Int, String) -> Bool 1`] = `
{
  "ok": {
    "fn": {
      "args": [
        {
          "type": "Int",
        },
        {
          "type": "String",
        },
      ],
      "ret": {
        "type": "Bool",
      },
    },
  },
}
`;

exports[`() -> Void matches snapshot: TypeExpression: () -> Void 1`] = `
{
  "ok": {
    "fn": {
      "args": [],
      "ret": {
        "type": "Void",
      },
    },
  },
}
`;

exports[`#(Int, Bool, String) matches snapshot: TypeExpression: #(Int, Bool, String) 1`] = `
{
  "ok": {
    "tuple": [
      {
        "type": "Int",
      },
      {
        "type": "Bool",
      },
      {
        "type": "String",
      },
    ],
  },
}
`;

exports[`#() matches snapshot: TypeExpression: #() 1`] = `
{
  "ok": {
    "tuple": [],
  },
}
`;

exports[`#{x: Int, y: Bool} matches snapshot: TypeExpression: #{x: Int, y: Bool} 1`] = `
{
  "ok": {
    "record": [
      {
        "name": {
          "name": "x",
        },
        "ty": {
          "type": "Int",
        },
      },
      {
        "name": {
          "name": "y",
        },
        "ty": {
          "type": "Bool",
        },
      },
    ],
  },
}
`;

exports[`#{nested: #(Int, String), flag: Bool} matches snapshot: TypeExpression: #{nested: #(Int, String), flag: Bool} 1`] = `
{
  "ok": {
    "record": [
      {
        "name": {
          "name": "nested",
        },
        "ty": {
          "tuple": [
            {
              "type": "Int",
            },
            {
              "type": "String",
            },
          ],
        },
      },
      {
        "name": {
          "name": "flag",
        },
        "ty": {
          "type": "Bool",
        },
      },
    ],
  },
}
`;

exports[`#{a: Int}.a matches snapshot: TypeExpression: #{a: Int}.a 1`] = `
{
  "ok": {
    "select": {
      "name": {
        "name": "a",
      },
      "root": {
        "record": [
          {
            "name": {
              "name": "a",
            },
            "ty": {
              "type": "Int",
            },
          },
        ],
      },
    },
  },
}
`;

exports[`List<Int> matches snapshot: TypeExpression: List<Int> 1`] = `
{
  "ok": {
    "app": {
      "args": [
        {
          "type": "Int",
        },
      ],
      "callee": {
        "type": "List",
      },
    },
  },
}
`;

exports[`Map<String, Int> matches snapshot: TypeExpression: Map<String, Int> 1`] = `
{
  "ok": {
    "app": {
      "args": [
        {
          "type": "String",
        },
        {
          "type": "Int",
        },
      ],
      "callee": {
        "type": "Map",
      },
    },
  },
}
`;

exports[`Outer.Inner<Nested<T>> matches snapshot: TypeExpression: Outer.Inner<Nested<T>> 1`] = `
{
  "ok": {
    "app": {
      "args": [
        {
          "app": {
            "args": [
              {
                "type": "T",
              },
            ],
            "callee": {
              "type": "Nested",
            },
          },
        },
      ],
      "callee": {
        "select": {
          "name": {
            "type": "Inner",
          },
          "root": {
            "type": "Outer",
          },
        },
      },
    },
  },
}
`;

exports[`(Int, List<String>) -> Map<String, Int> matches snapshot: TypeExpression: (Int, List<String>) -> Map<String, Int> 1`] = `
{
  "ok": {
    "fn": {
      "args": [
        {
          "type": "Int",
        },
        {
          "app": {
            "args": [
              {
                "type": "String",
              },
            ],
            "callee": {
              "type": "List",
            },
          },
        },
      ],
      "ret": {
        "app": {
          "args": [
            {
              "type": "String",
            },
            {
              "type": "Int",
            },
          ],
          "callee": {
            "type": "Map",
          },
        },
      },
    },
  },
}
`;

exports[`(#(Int, Bool)) -> #{ok: String, err: String} matches snapshot: TypeExpression: (#(Int, Bool)) -> #{ok: String, err: String} 1`] = `
{
  "ok": {
    "fn": {
      "args": [
        {
          "tuple": [
            {
              "type": "Int",
            },
            {
              "type": "Bool",
            },
          ],
        },
      ],
      "ret": {
        "record": [
          {
            "name": {
              "name": "ok",
            },
            "ty": {
              "type": "String",
            },
          },
          {
            "name": {
              "name": "err",
            },
            "ty": {
              "type": "String",
            },
          },
        ],
      },
    },
  },
}
`;

exports[`a <- b matches snapshot: BodyExpression: a <- b 1`] = `
{
  "ok": {
    "arrow_bind": {
      "expression": {
        "name": "b",
      },
      "name": {
        "name": "a",
      },
    },
  },
}
`;

exports[`{ a; b; c } matches snapshot: BodyExpression: { a; b; c } 1`] = `
{
  "ok": {
    "expression": {
      "block": [
        {
          "expression": {
            "name": "a",
          },
        },
        {
          "expression": {
            "name": "b",
          },
        },
        {
          "expression": {
            "name": "c",
          },
        },
      ],
    },
  },
}
`;

exports[`let a = b matches snapshot: BodyExpression: let a = b 1`] = `
{
  "ok": {
    "let_bind": {
      "assert": false,
      "expression": {
        "name": "b",
      },
      "pattern": {
        "name": "a",
      },
    },
  },
}
`;

exports[`let Some(a) = b matches snapshot: BodyExpression: let Some(a) = b 1`] = `
{
  "ok": {
    "let_bind": {
      "assert": false,
      "expression": {
        "name": "b",
      },
      "pattern": {
        "constr": {
          "patterns": [
            {
              "name": "a",
            },
          ],
          "type": {
            "type": "Some",
          },
        },
      },
    },
  },
}
`;

exports[`let assert Some(a) = b matches snapshot: BodyExpression: let assert Some(a) = b 1`] = `
{
  "ok": {
    "let_bind": {
      "assert": true,
      "expression": {
        "name": "b",
      },
      "pattern": {
        "constr": {
          "patterns": [
            {
              "name": "a",
            },
          ],
          "type": {
            "type": "Some",
          },
        },
      },
    },
  },
}
`;

exports[`d = a + b matches snapshot: BodyExpression: d = a + b 1`] = `
{
  "ok": {
    "assign": {
      "expression": {
        "infix": {
          "left": {
            "name": "a",
          },
          "op": "+",
          "right": {
            "name": "b",
          },
        },
      },
      "name": {
        "name": "d",
      },
    },
  },
}
`;

exports[`fn add(x: I32, y: I32): I32 { x + y } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "infix": {
                    "left": {
                      "name": "x",
                    },
                    "op": "+",
                    "right": {
                      "name": "y",
                    },
                  },
                },
              },
            ],
          },
          "name": {
            "name": "add",
          },
          "params": [
            {
              "guard": {
                "type": "I32",
              },
              "name": {
                "name": "x",
              },
            },
            {
              "guard": {
                "type": "I32",
              },
              "name": {
                "name": "y",
              },
            },
          ],
          "return_type": {
            "type": "I32",
          },
          "type_params": [],
        },
        "pub": false,
      },
    },
  },
]
`;

exports[`pub fn main() { 42 } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "int": {
                    "size": 32,
                    "value": 42n,
                  },
                },
              },
            ],
          },
          "name": {
            "name": "main",
          },
          "params": [],
          "return_type": null,
          "type_params": [],
        },
        "pub": true,
      },
    },
  },
]
`;

exports[`fn identity<t>(x: t): t { x } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "name": "x",
                },
              },
            ],
          },
          "name": {
            "name": "identity",
          },
          "params": [
            {
              "guard": {
                "name": "t",
              },
              "name": {
                "name": "x",
              },
            },
          ],
          "return_type": {
            "name": "t",
          },
          "type_params": [
            {
              "name": "t",
            },
          ],
        },
        "pub": false,
      },
    },
  },
]
`;

exports[`let x: i32 = 42 matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "let_dec": {
        "guard": {
          "name": "i32",
        },
        "id": {
          "name": "x",
        },
        "pub": false,
        "value": {
          "int": {
            "size": 32,
            "value": 42n,
          },
        },
      },
    },
  },
]
`;

exports[`pub let pi: f64 = 3.14159 matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "let_dec": {
        "guard": {
          "name": "f64",
        },
        "id": {
          "name": "pi",
        },
        "pub": true,
        "value": {
          "float": {
            "size": 64,
            "value": 3.14159,
          },
        },
      },
    },
  },
]
`;

exports[`let y = true matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "let_dec": {
        "guard": null,
        "id": {
          "name": "y",
        },
        "pub": false,
        "value": {
          "bool": true,
        },
      },
    },
  },
]
`;

exports[`type MyInt = I32 matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "type_dec": {
        "id": {
          "type": "MyInt",
        },
        "params": [],
        "pub": false,
        "value": {
          "type": "I32",
        },
      },
    },
  },
]
`;

exports[`pub enum Result<t, e> { Ok(t), Err(e) } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "type": "Result",
        },
        "pub": true,
        "type_params": [
          {
            "name": "t",
          },
          {
            "name": "e",
          },
        ],
        "variants": [
          {
            "values": {
              "id": {
                "type": "Ok",
              },
              "values": [
                {
                  "name": "t",
                },
              ],
            },
          },
          {
            "values": {
              "id": {
                "type": "Err",
              },
              "values": [
                {
                  "name": "e",
                },
              ],
            },
          },
        ],
      },
    },
  },
]
`;

exports[`enum Color { Red, Green(I32), Blue { shade: f32 } } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "type": "Color",
        },
        "pub": false,
        "type_params": [],
        "variants": [
          {
            "values": {
              "id": {
                "type": "Red",
              },
              "values": [],
            },
          },
          {
            "values": {
              "id": {
                "type": "Green",
              },
              "values": [
                {
                  "type": "I32",
                },
              ],
            },
          },
          {
            "fields": {
              "fields": [
                {
                  "name": {
                    "name": "shade",
                  },
                  "ty": {
                    "name": "f32",
                  },
                },
              ],
              "id": {
                "type": "Blue",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`pub enum Direction { Up, Down, Left, Right } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "type": "Direction",
        },
        "pub": true,
        "type_params": [],
        "variants": [
          {
            "values": {
              "id": {
                "type": "Up",
              },
              "values": [],
            },
          },
          {
            "values": {
              "id": {
                "type": "Down",
              },
              "values": [],
            },
          },
          {
            "values": {
              "id": {
                "type": "Left",
              },
              "values": [],
            },
          },
          {
            "values": {
              "id": {
                "type": "Right",
              },
              "values": [],
            },
          },
        ],
      },
    },
  },
]
`;

exports[`pub trait Eq<t> { fn eq(other: t) : bool } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "trait": {
        "fns": [
          {
            "name": {
              "name": "eq",
            },
            "params": [
              {
                "name": {
                  "name": "other",
                },
                "ty": {
                  "name": "t",
                },
              },
            ],
            "return_type": {
              "name": "bool",
            },
            "type_params": [],
          },
        ],
        "id": {
          "type": "Eq",
        },
        "pub": true,
        "type_params": [
          {
            "name": "t",
          },
        ],
      },
    },
  },
]
`;

exports[`trait Drawable { fn draw(): Void fn bounds(): Rect } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "trait": {
        "fns": [
          {
            "name": {
              "name": "draw",
            },
            "params": [],
            "return_type": {
              "type": "Void",
            },
            "type_params": [],
          },
          {
            "name": {
              "name": "bounds",
            },
            "params": [],
            "return_type": {
              "type": "Rect",
            },
            "type_params": [],
          },
        ],
        "id": {
          "type": "Drawable",
        },
        "pub": false,
        "type_params": [],
      },
    },
  },
]
`;

exports[`import "std" { fn print(): Void as out } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "std",
        "imports": [
          {
            "fn": {
              "alias": {
                "name": "out",
              },
              "name": {
                "name": "print",
              },
              "signature": {
                "param_types": [],
                "return_type": {
                  "type": "Void",
                },
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`import "std" { memory "memory": 1 as mem } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "std",
        "imports": [
          {
            "memory": {
              "alias": {
                "name": "mem",
              },
              "max": null,
              "min": {
                "int": 1n,
              },
              "name": {
                "string": "memory",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`import "std" { global mut count: i32 as cnt } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "std",
        "imports": [
          {
            "global": {
              "alias": {
                "name": "cnt",
              },
              "global_type": {
                "name": "i32",
              },
              "mut": true,
              "name": {
                "name": "count",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`import "wasm" { table "table": I32 0 0 as tbl } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "wasm",
        "imports": [
          {
            "table": {
              "alias": {
                "name": "tbl",
              },
              "max": {
                "int": 0n,
              },
              "min": {
                "int": 0n,
              },
              "name": {
                "string": "table",
              },
              "table_type": {
                "type": "I32",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`import "wasm" { type Option as Maybe } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "wasm",
        "imports": [
          {
            "type": {
              "alias": {
                "type": "Maybe",
              },
              "name": {
                "type": "Option",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`import "wasm" { trait Semiring } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "wasm",
        "imports": [
          {
            "trait": {
              "alias": null,
              "name": {
                "type": "Semiring",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`import "wasm" { item } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "wasm",
        "imports": [
          {
            "name": {
              "alias": null,
              "name": {
                "name": "item",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`import "wasm" { item as blah } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "wasm",
        "imports": [
          {
            "name": {
              "alias": {
                "name": "blah",
              },
              "name": {
                "name": "item",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`import "std" { Some } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "std",
        "imports": [
          {
            "constr": {
              "alias": null,
              "name": {
                "type": "Some",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`Expression: self matches snapshot: Expression: self 1`] = `
{
  "ok": {
    "self": null,
  },
}
`;

exports[`Expression: self.field matches snapshot: Expression: self.field 1`] = `
{
  "ok": {
    "select": [
      {
        "self": null,
      },
      {
        "name": "field",
      },
    ],
  },
}
`;

exports[`Expression: self.method() matches snapshot: Expression: self.method() 1`] = `
{
  "ok": {
    "call": [
      {
        "select": [
          {
            "self": null,
          },
          {
            "name": "method",
          },
        ],
      },
      [],
    ],
  },
}
`;

exports[`Expression: fn (x: Int) { x + 1 } matches snapshot: Expression: fn (x: Int) { x + 1 } 1`] = `
{
  "ok": {
    "fn": {
      "body": {
        "block": [
          {
            "expression": {
              "infix": {
                "left": {
                  "name": "x",
                },
                "op": "+",
                "right": {
                  "int": {
                    "size": 32,
                    "value": 1n,
                  },
                },
              },
            },
          },
        ],
      },
      "name": null,
      "params": [
        {
          "guard": {
            "type": "Int",
          },
          "name": {
            "name": "x",
          },
        },
      ],
      "return_type": null,
      "type_params": [],
    },
  },
}
`;

exports[`Expression: fn (x, y) { x + y } matches snapshot: Expression: fn (x, y) { x + y } 1`] = `
{
  "ok": {
    "fn": {
      "body": {
        "block": [
          {
            "expression": {
              "infix": {
                "left": {
                  "name": "x",
                },
                "op": "+",
                "right": {
                  "name": "y",
                },
              },
            },
          },
        ],
      },
      "name": null,
      "params": [
        {
          "guard": null,
          "name": {
            "name": "x",
          },
        },
        {
          "guard": null,
          "name": {
            "name": "y",
          },
        },
      ],
      "return_type": null,
      "type_params": [],
    },
  },
}
`;

exports[`Expression: !x matches snapshot: Expression: !x 1`] = `
{
  "ok": {
    "prefix": {
      "op": "!",
      "operand": {
        "name": "x",
      },
    },
  },
}
`;

exports[`Expression: -42 matches snapshot: Expression: -42 1`] = `
{
  "ok": {
    "int": {
      "size": 32,
      "value": -42n,
    },
  },
}
`;

exports[`Expression: ~bits matches snapshot: Expression: ~bits 1`] = `
{
  "ok": {
    "prefix": {
      "op": "~",
      "operand": {
        "name": "bits",
      },
    },
  },
}
`;

exports[`Expression: .!x matches snapshot: Expression: .!x 1`] = `
{
  "ok": {
    "prefix": {
      "op": ".!",
      "operand": {
        "name": "x",
      },
    },
  },
}
`;

exports[`Expression: !.x matches snapshot: Expression: !.x 1`] = `
{
  "ok": {
    "prefix": {
      "op": "!.",
      "operand": {
        "name": "x",
      },
    },
  },
}
`;

exports[`Expression: .~y matches snapshot: Expression: .~y 1`] = `
{
  "ok": {
    "prefix": {
      "op": ".~",
      "operand": {
        "name": "y",
      },
    },
  },
}
`;

exports[`Expression: ~.y matches snapshot: Expression: ~.y 1`] = `
{
  "ok": {
    "prefix": {
      "op": "~.",
      "operand": {
        "name": "y",
      },
    },
  },
}
`;

exports[`Expression: .-z matches snapshot: Expression: .-z 1`] = `
{
  "ok": {
    "prefix": {
      "op": ".-",
      "operand": {
        "name": "z",
      },
    },
  },
}
`;

exports[`Expression: -.z matches snapshot: Expression: -.z 1`] = `
{
  "ok": {
    "prefix": {
      "op": "-.",
      "operand": {
        "name": "z",
      },
    },
  },
}
`;

exports[`Expression: x! matches snapshot: Expression: x! 1`] = `
{
  "ok": {
    "postfix": {
      "op": "!",
      "operand": {
        "name": "x",
      },
    },
  },
}
`;

exports[`Expression: x? matches snapshot: Expression: x? 1`] = `
{
  "ok": {
    "postfix": {
      "op": "?",
      "operand": {
        "name": "x",
      },
    },
  },
}
`;

exports[`Expression: x.! matches snapshot: Expression: x.! 1`] = `
{
  "ok": {
    "postfix": {
      "op": ".!",
      "operand": {
        "name": "x",
      },
    },
  },
}
`;

exports[`Expression: x!. matches snapshot: Expression: x!. 1`] = `
{
  "ok": {
    "postfix": {
      "op": "!.",
      "operand": {
        "name": "x",
      },
    },
  },
}
`;

exports[`Expression: x.? matches snapshot: Expression: x.? 1`] = `
{
  "ok": {
    "postfix": {
      "op": ".?",
      "operand": {
        "name": "x",
      },
    },
  },
}
`;

exports[`Expression: x?. matches snapshot: Expression: x?. 1`] = `
{
  "ok": {
    "postfix": {
      "op": "?.",
      "operand": {
        "name": "x",
      },
    },
  },
}
`;

exports[`Expression: a .+ b matches snapshot: Expression: a .+ b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".+",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a +. b matches snapshot: Expression: a +. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "+.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .* b matches snapshot: Expression: a .* b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".*",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a *. b matches snapshot: Expression: a *. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "*.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a ./ b matches snapshot: Expression: a ./ b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "./",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a /. b matches snapshot: Expression: a /. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "/.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .** b matches snapshot: Expression: a .** b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".**",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a **. b matches snapshot: Expression: a **. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "**.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .- b matches snapshot: Expression: a .- b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".-",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a -. b matches snapshot: Expression: a -. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "-.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .% b matches snapshot: Expression: a .% b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".%",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a %. b matches snapshot: Expression: a %. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "%.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a & b matches snapshot: Expression: a & b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "&",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a | b matches snapshot: Expression: a | b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "|",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a ^ b matches snapshot: Expression: a ^ b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "^",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a << b matches snapshot: Expression: a << b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "<<",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a >> b matches snapshot: Expression: a >> b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ">>",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .& b matches snapshot: Expression: a .& b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".&",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a &. b matches snapshot: Expression: a &. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "&.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .| b matches snapshot: Expression: a .| b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".|",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a |. b matches snapshot: Expression: a |. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "|.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .^ b matches snapshot: Expression: a .^ b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".^",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a ^. b matches snapshot: Expression: a ^. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "^.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .<< b matches snapshot: Expression: a .<< b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".<<",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a <<. b matches snapshot: Expression: a <<. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "<<.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .>> b matches snapshot: Expression: a .>> b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".>>",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a >>. b matches snapshot: Expression: a >>. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ">>.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a < b matches snapshot: Expression: a < b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "<",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a > b matches snapshot: Expression: a > b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ">",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a <= b matches snapshot: Expression: a <= b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "<=",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a >= b matches snapshot: Expression: a >= b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ">=",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a == b matches snapshot: Expression: a == b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "==",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a != b matches snapshot: Expression: a != b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "!=",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .< b matches snapshot: Expression: a .< b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".<",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a <. b matches snapshot: Expression: a <. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "<.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .> b matches snapshot: Expression: a .> b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".>",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a >. b matches snapshot: Expression: a >. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ">.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .<= b matches snapshot: Expression: a .<= b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".<=",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a <=. b matches snapshot: Expression: a <=. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "<=.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .>= b matches snapshot: Expression: a .>= b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".>=",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a >=. b matches snapshot: Expression: a >=. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ">=.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .== b matches snapshot: Expression: a .== b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".==",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a ==. b matches snapshot: Expression: a ==. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "==.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .!= b matches snapshot: Expression: a .!= b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".!=",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a !=. b matches snapshot: Expression: a !=. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "!=.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a && b matches snapshot: Expression: a && b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "&&",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a || b matches snapshot: Expression: a || b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "||",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a ^^ b matches snapshot: Expression: a ^^ b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "^^",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .&& b matches snapshot: Expression: a .&& b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".&&",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a &&. b matches snapshot: Expression: a &&. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "&&.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .|| b matches snapshot: Expression: a .|| b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".||",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a ||. b matches snapshot: Expression: a ||. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "||.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .^^ b matches snapshot: Expression: a .^^ b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".^^",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a ^^. b matches snapshot: Expression: a ^^. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "^^.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a ?? b matches snapshot: Expression: a ?? b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "??",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .?? b matches snapshot: Expression: a .?? b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".??",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a ??. b matches snapshot: Expression: a ??. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "??.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .. b matches snapshot: Expression: a .. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "..",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a |> b matches snapshot: Expression: a |> b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "|>",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a <> b matches snapshot: Expression: a <> b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "<>",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a .<> b matches snapshot: Expression: a .<> b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": ".<>",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a <>. b matches snapshot: Expression: a <>. b 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "<>.",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Expression: a + b * c ** d matches snapshot: Expression: a + b * c ** d 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "+",
      "right": {
        "infix": {
          "left": {
            "name": "b",
          },
          "op": "*",
          "right": {
            "infix": {
              "left": {
                "name": "c",
              },
              "op": "**",
              "right": {
                "name": "d",
              },
            },
          },
        },
      },
    },
  },
}
`;

exports[`Expression: a || b && c matches snapshot: Expression: a || b && c 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "||",
      "right": {
        "infix": {
          "left": {
            "name": "b",
          },
          "op": "&&",
          "right": {
            "name": "c",
          },
        },
      },
    },
  },
}
`;

exports[`Expression: !a && b || c matches snapshot: Expression: !a && b || c 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "infix": {
          "left": {
            "prefix": {
              "op": "!",
              "operand": {
                "name": "a",
              },
            },
          },
          "op": "&&",
          "right": {
            "name": "b",
          },
        },
      },
      "op": "||",
      "right": {
        "name": "c",
      },
    },
  },
}
`;

exports[`Expression: a + b < c * d matches snapshot: Expression: a + b < c * d 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "infix": {
          "left": {
            "name": "a",
          },
          "op": "+",
          "right": {
            "name": "b",
          },
        },
      },
      "op": "<",
      "right": {
        "infix": {
          "left": {
            "name": "c",
          },
          "op": "*",
          "right": {
            "name": "d",
          },
        },
      },
    },
  },
}
`;

exports[`Expression: a |> b |> c matches snapshot: Expression: a |> b |> c 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "infix": {
          "left": {
            "name": "a",
          },
          "op": "|>",
          "right": {
            "name": "b",
          },
        },
      },
      "op": "|>",
      "right": {
        "name": "c",
      },
    },
  },
}
`;

exports[`Expression: a ?? b ?? c matches snapshot: Expression: a ?? b ?? c 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "??",
      "right": {
        "infix": {
          "left": {
            "name": "b",
          },
          "op": "??",
          "right": {
            "name": "c",
          },
        },
      },
    },
  },
}
`;

exports[`Expression: obj.foo().bar().baz matches snapshot: Expression: obj.foo().bar().baz 1`] = `
{
  "ok": {
    "select": [
      {
        "call": [
          {
            "select": [
              {
                "call": [
                  {
                    "select": [
                      {
                        "name": "obj",
                      },
                      {
                        "name": "foo",
                      },
                    ],
                  },
                  [],
                ],
              },
              {
                "name": "bar",
              },
            ],
          },
          [],
        ],
      },
      {
        "name": "baz",
      },
    ],
  },
}
`;

exports[`Expression: list.map(fn(x) { x + 1 }).filter(fn(x) { x > 0 }) matches snapshot: Expression: list.map(fn(x) { x + 1 }).filter(fn(x) { x > 0 }) 1`] = `
{
  "ok": {
    "call": [
      {
        "select": [
          {
            "call": [
              {
                "select": [
                  {
                    "name": "list",
                  },
                  {
                    "name": "map",
                  },
                ],
              },
              [
                {
                  "fn": {
                    "body": {
                      "block": [
                        {
                          "expression": {
                            "infix": {
                              "left": {
                                "name": "x",
                              },
                              "op": "+",
                              "right": {
                                "int": {
                                  "size": 32,
                                  "value": 1n,
                                },
                              },
                            },
                          },
                        },
                      ],
                    },
                    "name": null,
                    "params": [
                      {
                        "guard": null,
                        "name": {
                          "name": "x",
                        },
                      },
                    ],
                    "return_type": null,
                    "type_params": [],
                  },
                },
              ],
            ],
          },
          {
            "name": "filter",
          },
        ],
      },
      [
        {
          "fn": {
            "body": {
              "block": [
                {
                  "expression": {
                    "infix": {
                      "left": {
                        "name": "x",
                      },
                      "op": ">",
                      "right": {
                        "int": {
                          "size": 32,
                          "value": 0n,
                        },
                      },
                    },
                  },
                },
              ],
            },
            "name": null,
            "params": [
              {
                "guard": null,
                "name": {
                  "name": "x",
                },
              },
            ],
            "return_type": null,
            "type_params": [],
          },
        },
      ],
    ],
  },
}
`;

exports[`Expression: fn(x) { match x { Some(y) => y, None => 0 } } matches snapshot: Expression: fn(x) { match x { Some(y) => y, None => 0 } } 1`] = `
{
  "ok": {
    "fn": {
      "body": {
        "block": [
          {
            "expression": {
              "match": [
                {
                  "name": "x",
                },
                [
                  {
                    "body": {
                      "name": "y",
                    },
                    "guard": null,
                    "pattern": {
                      "constr": {
                        "patterns": [
                          {
                            "name": "y",
                          },
                        ],
                        "type": {
                          "type": "Some",
                        },
                      },
                    },
                  },
                  {
                    "body": {
                      "int": {
                        "size": 32,
                        "value": 0n,
                      },
                    },
                    "guard": null,
                    "pattern": {
                      "constr": {
                        "patterns": [],
                        "type": {
                          "type": "None",
                        },
                      },
                    },
                  },
                ],
              ],
            },
          },
        ],
      },
      "name": null,
      "params": [
        {
          "guard": null,
          "name": {
            "name": "x",
          },
        },
      ],
      "return_type": null,
      "type_params": [],
    },
  },
}
`;

exports[`Expression: if a { #{x: 1} } else { #{x: 2} } matches snapshot: Expression: if a { #{x: 1} } else { #{x: 2} } 1`] = `
{
  "ok": {
    "if_expr": {
      "cond": {
        "name": "a",
      },
      "else_body": {
        "block": [
          {
            "expression": {
              "record": [
                [
                  {
                    "name": "x",
                  },
                  {
                    "int": {
                      "size": 32,
                      "value": 2n,
                    },
                  },
                ],
              ],
            },
          },
        ],
      },
      "if_body": {
        "block": [
          {
            "expression": {
              "record": [
                [
                  {
                    "name": "x",
                  },
                  {
                    "int": {
                      "size": 32,
                      "value": 1n,
                    },
                  },
                ],
              ],
            },
          },
        ],
      },
    },
  },
}
`;

exports[`Expression: { let x = 1; let y = 2; x + y } matches snapshot: Expression: { let x = 1; let y = 2; x + y } 1`] = `
{
  "ok": {
    "block": [
      {
        "let_bind": {
          "assert": false,
          "expression": {
            "int": {
              "size": 32,
              "value": 1n,
            },
          },
          "pattern": {
            "name": "x",
          },
        },
      },
      {
        "let_bind": {
          "assert": false,
          "expression": {
            "int": {
              "size": 32,
              "value": 2n,
            },
          },
          "pattern": {
            "name": "y",
          },
        },
      },
      {
        "expression": {
          "infix": {
            "left": {
              "name": "x",
            },
            "op": "+",
            "right": {
              "name": "y",
            },
          },
        },
      },
    ],
  },
}
`;

exports[`Expression: inf matches snapshot: Expression: inf 1`] = `
{
  "ok": {
    "float": {
      "size": 64,
      "value": Infinity,
    },
  },
}
`;

exports[`Expression: nan matches snapshot: Expression: nan 1`] = `
{
  "ok": {
    "float": {
      "size": 64,
      "value": NaN,
    },
  },
}
`;

exports[`Expression: inf + 1 matches snapshot: Expression: inf + 1 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "float": {
          "size": 64,
          "value": Infinity,
        },
      },
      "op": "+",
      "right": {
        "int": {
          "size": 32,
          "value": 1n,
        },
      },
    },
  },
}
`;

exports[`Expression: nan * 2 matches snapshot: Expression: nan * 2 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "float": {
          "size": 64,
          "value": NaN,
        },
      },
      "op": "*",
      "right": {
        "int": {
          "size": 32,
          "value": 2n,
        },
      },
    },
  },
}
`;

exports[`Pattern: Some(Pair(x, y)) matches snapshot: PatternExpression: Some(Pair(x, y)) 1`] = `
{
  "ok": {
    "constr": {
      "patterns": [
        {
          "constr": {
            "patterns": [
              {
                "name": "x",
              },
              {
                "name": "y",
              },
            ],
            "type": {
              "type": "Pair",
            },
          },
        },
      ],
      "type": {
        "type": "Some",
      },
    },
  },
}
`;

exports[`Pattern: Result(Ok(value)) matches snapshot: PatternExpression: Result(Ok(value)) 1`] = `
{
  "ok": {
    "constr": {
      "patterns": [
        {
          "constr": {
            "patterns": [
              {
                "name": "value",
              },
            ],
            "type": {
              "type": "Ok",
            },
          },
        },
      ],
      "type": {
        "type": "Result",
      },
    },
  },
}
`;

exports[`Pattern: #{} matches snapshot: PatternExpression: #{} 1`] = `
{
  "ok": {
    "record": [],
  },
}
`;

exports[`Pattern: #{x, y, z} matches snapshot: PatternExpression: #{x, y, z} 1`] = `
{
  "ok": {
    "record": [
      [
        {
          "name": "x",
        },
        {
          "name": "x",
        },
      ],
      [
        {
          "name": "y",
        },
        {
          "name": "y",
        },
      ],
      [
        {
          "name": "z",
        },
        {
          "name": "z",
        },
      ],
    ],
  },
}
`;

exports[`Pattern: #{point: #(x, y)} matches snapshot: PatternExpression: #{point: #(x, y)} 1`] = `
{
  "ok": {
    "record": [
      [
        {
          "name": "point",
        },
        {
          "tuple": [
            {
              "name": "x",
            },
            {
              "name": "y",
            },
          ],
        },
      ],
    ],
  },
}
`;

exports[`Pattern: Wrapper(#{inner: value}) matches snapshot: PatternExpression: Wrapper(#{inner: value}) 1`] = `
{
  "ok": {
    "constr": {
      "patterns": [
        {
          "record": [
            [
              {
                "name": "inner",
              },
              {
                "name": "value",
              },
            ],
          ],
        },
      ],
      "type": {
        "type": "Wrapper",
      },
    },
  },
}
`;

exports[`Pattern: Nested(#(1, #{x: y})) matches snapshot: PatternExpression: Nested(#(1, #{x: y})) 1`] = `
{
  "ok": {
    "constr": {
      "patterns": [
        {
          "tuple": [
            {
              "int": {
                "size": 32,
                "value": 1n,
              },
            },
            {
              "record": [
                [
                  {
                    "name": "x",
                  },
                  {
                    "name": "y",
                  },
                ],
              ],
            },
          ],
        },
      ],
      "type": {
        "type": "Nested",
      },
    },
  },
}
`;

exports[`Type: #() matches snapshot: TypeExpression: #() 1`] = `
{
  "ok": {
    "tuple": [],
  },
}
`;

exports[`Type: #{} matches snapshot: TypeExpression: #{} 1`] = `
{
  "ok": {
    "record": [],
  },
}
`;

exports[`Type: () -> Void matches snapshot: TypeExpression: () -> Void 1`] = `
{
  "ok": {
    "fn": {
      "args": [],
      "ret": {
        "type": "Void",
      },
    },
  },
}
`;

exports[`Type: A.B.C.D matches snapshot: TypeExpression: A.B.C.D 1`] = `
{
  "ok": {
    "select": {
      "name": {
        "type": "D",
      },
      "root": {
        "select": {
          "name": {
            "type": "C",
          },
          "root": {
            "select": {
              "name": {
                "type": "B",
              },
              "root": {
                "type": "A",
              },
            },
          },
        },
      },
    },
  },
}
`;

exports[`Type: Container<Inner<T>>.Value matches snapshot: TypeExpression: Container<Inner<T>>.Value 1`] = `
{
  "ok": {
    "select": {
      "name": {
        "type": "Value",
      },
      "root": {
        "app": {
          "args": [
            {
              "app": {
                "args": [
                  {
                    "type": "T",
                  },
                ],
                "callee": {
                  "type": "Inner",
                },
              },
            },
          ],
          "callee": {
            "type": "Container",
          },
        },
      },
    },
  },
}
`;

exports[`Type: Map<K, V> matches snapshot: TypeExpression: Map<K, V> 1`] = `
{
  "ok": {
    "app": {
      "args": [
        {
          "type": "K",
        },
        {
          "type": "V",
        },
      ],
      "callee": {
        "type": "Map",
      },
    },
  },
}
`;

exports[`Type: Triple<A, B, C> matches snapshot: TypeExpression: Triple<A, B, C> 1`] = `
{
  "ok": {
    "app": {
      "args": [
        {
          "type": "A",
        },
        {
          "type": "B",
        },
        {
          "type": "C",
        },
      ],
      "callee": {
        "type": "Triple",
      },
    },
  },
}
`;

exports[`Type: Fn<#(A, B), C> matches snapshot: TypeExpression: Fn<#(A, B), C> 1`] = `
{
  "ok": {
    "app": {
      "args": [
        {
          "tuple": [
            {
              "type": "A",
            },
            {
              "type": "B",
            },
          ],
        },
        {
          "type": "C",
        },
      ],
      "callee": {
        "type": "Fn",
      },
    },
  },
}
`;

exports[`Type: ((Int) -> Int) -> Int matches snapshot: TypeExpression: ((Int) -> Int) -> Int 1`] = `
{
  "ok": {
    "fn": {
      "args": [
        {
          "fn": {
            "args": [
              {
                "type": "Int",
              },
            ],
            "ret": {
              "type": "Int",
            },
          },
        },
      ],
      "ret": {
        "type": "Int",
      },
    },
  },
}
`;

exports[`Type: (Int, (String) -> Bool) -> Result matches snapshot: TypeExpression: (Int, (String) -> Bool) -> Result 1`] = `
{
  "ok": {
    "fn": {
      "args": [
        {
          "type": "Int",
        },
        {
          "fn": {
            "args": [
              {
                "type": "String",
              },
            ],
            "ret": {
              "type": "Bool",
            },
          },
        },
      ],
      "ret": {
        "type": "Result",
      },
    },
  },
}
`;

exports[`Type: #{pos: #(f64, f64), vel: #(f64, f64)} matches snapshot: TypeExpression: #{pos: #(f64, f64), vel: #(f64, f64)} 1`] = `
{
  "ok": {
    "record": [
      {
        "name": {
          "name": "pos",
        },
        "ty": {
          "tuple": [
            {
              "name": "f64",
            },
            {
              "name": "f64",
            },
          ],
        },
      },
      {
        "name": {
          "name": "vel",
        },
        "ty": {
          "tuple": [
            {
              "name": "f64",
            },
            {
              "name": "f64",
            },
          ],
        },
      },
    ],
  },
}
`;

exports[`Body: let #(x, y) = point matches snapshot: BodyExpression: let #(x, y) = point 1`] = `
{
  "ok": {
    "let_bind": {
      "assert": false,
      "expression": {
        "name": "point",
      },
      "pattern": {
        "tuple": [
          {
            "name": "x",
          },
          {
            "name": "y",
          },
        ],
      },
    },
  },
}
`;

exports[`Body: let #{name, age} = person matches snapshot: BodyExpression: let #{name, age} = person 1`] = `
{
  "ok": {
    "let_bind": {
      "assert": false,
      "expression": {
        "name": "person",
      },
      "pattern": {
        "record": [
          [
            {
              "name": "name",
            },
            {
              "name": "name",
            },
          ],
          [
            {
              "name": "age",
            },
            {
              "name": "age",
            },
          ],
        ],
      },
    },
  },
}
`;

exports[`Body: let Some(value) = option matches snapshot: BodyExpression: let Some(value) = option 1`] = `
{
  "ok": {
    "let_bind": {
      "assert": false,
      "expression": {
        "name": "option",
      },
      "pattern": {
        "constr": {
          "patterns": [
            {
              "name": "value",
            },
          ],
          "type": {
            "type": "Some",
          },
        },
      },
    },
  },
}
`;

exports[`Body: { { a; b }; c } matches snapshot: BodyExpression: { { a; b }; c } 1`] = `
{
  "ok": {
    "expression": {
      "block": [
        {
          "expression": {
            "block": [
              {
                "expression": {
                  "name": "a",
                },
              },
              {
                "expression": {
                  "name": "b",
                },
              },
            ],
          },
        },
        {
          "expression": {
            "name": "c",
          },
        },
      ],
    },
  },
}
`;

exports[`Body: { let x = 1; y <- compute(); x + y } matches snapshot: BodyExpression: { let x = 1; y <- compute(); x + y } 1`] = `
{
  "ok": {
    "expression": {
      "block": [
        {
          "let_bind": {
            "assert": false,
            "expression": {
              "int": {
                "size": 32,
                "value": 1n,
              },
            },
            "pattern": {
              "name": "x",
            },
          },
        },
        {
          "arrow_bind": {
            "expression": {
              "call": [
                {
                  "name": "compute",
                },
                [],
              ],
            },
            "name": {
              "name": "y",
            },
          },
        },
        {
          "expression": {
            "infix": {
              "left": {
                "name": "x",
              },
              "op": "+",
              "right": {
                "name": "y",
              },
            },
          },
        },
      ],
    },
  },
}
`;

exports[`Declaration: impl Show for Int { fn show(): String { "int" } } matches snapshot: Declaration: impl Show for Int { fn show(): String { "int" } } 1`] = `
[
  null,
  {
    "ok": {
      "impl": {
        "fns": [
          {
            "body": {
              "block": [
                {
                  "expression": {
                    "string": "int",
                  },
                },
              ],
            },
            "name": {
              "name": "show",
            },
            "params": [],
            "return_type": {
              "type": "String",
            },
            "type_params": [],
          },
        ],
        "for": {
          "type": "Int",
        },
        "name": {
          "type": "Show",
        },
        "type_params": [],
      },
    },
  },
]
`;

exports[`Declaration: impl Eq<T> for Option<T> { fn eq(other: Option<T>): Bool { true } } matches snapshot: Declaration: impl Eq<T> for Option<T> { fn eq(other: Option<T>): Bool { true } } 1`] = `
[
  null,
  {
    "ok": {
      "impl": {
        "fns": [
          {
            "body": {
              "block": [
                {
                  "expression": {
                    "bool": true,
                  },
                },
              ],
            },
            "name": {
              "name": "eq",
            },
            "params": [
              {
                "guard": {
                  "app": {
                    "args": [
                      {
                        "type": "T",
                      },
                    ],
                    "callee": {
                      "type": "Option",
                    },
                  },
                },
                "name": {
                  "name": "other",
                },
              },
            ],
            "return_type": {
              "type": "Bool",
            },
            "type_params": [],
          },
        ],
        "for": {
          "app": {
            "args": [
              {
                "type": "T",
              },
            ],
            "callee": {
              "type": "Option",
            },
          },
        },
        "name": {
          "type": "Eq",
        },
        "type_params": [
          {
            "type": "T",
          },
        ],
      },
    },
  },
]
`;

exports[`Declaration: impl Default for Vec<t> { fn default(): Vec<t> { Vec() } } matches snapshot: Declaration: impl Default for Vec<t> { fn default(): Vec<t> { Vec() } } 1`] = `
[
  null,
  {
    "ok": {
      "impl": {
        "fns": [
          {
            "body": {
              "block": [
                {
                  "expression": {
                    "call": [
                      {
                        "type": "Vec",
                      },
                      [],
                    ],
                  },
                },
              ],
            },
            "name": {
              "name": "default",
            },
            "params": [],
            "return_type": {
              "app": {
                "args": [
                  {
                    "name": "t",
                  },
                ],
                "callee": {
                  "type": "Vec",
                },
              },
            },
            "type_params": [],
          },
        ],
        "for": {
          "app": {
            "args": [
              {
                "name": "t",
              },
            ],
            "callee": {
              "type": "Vec",
            },
          },
        },
        "name": {
          "type": "Default",
        },
        "type_params": [],
      },
    },
  },
]
`;

exports[`Declaration: fn compose<a, b, c>(f: (b) -> c, g: (a) -> b): (a) -> c { fn(x: a): c { f(g(x)) } } matches snapshot: Declaration: fn compose<a, b, c>(f: (b) -> c, g: (a) -> b): (a) -> c { fn(x: a): c { f(g(x)) } } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "fn": {
                    "body": {
                      "block": [
                        {
                          "expression": {
                            "call": [
                              {
                                "name": "f",
                              },
                              [
                                {
                                  "call": [
                                    {
                                      "name": "g",
                                    },
                                    [
                                      {
                                        "name": "x",
                                      },
                                    ],
                                  ],
                                },
                              ],
                            ],
                          },
                        },
                      ],
                    },
                    "name": null,
                    "params": [
                      {
                        "guard": {
                          "name": "a",
                        },
                        "name": {
                          "name": "x",
                        },
                      },
                    ],
                    "return_type": {
                      "name": "c",
                    },
                    "type_params": [],
                  },
                },
              },
            ],
          },
          "name": {
            "name": "compose",
          },
          "params": [
            {
              "guard": {
                "fn": {
                  "args": [
                    {
                      "name": "b",
                    },
                  ],
                  "ret": {
                    "name": "c",
                  },
                },
              },
              "name": {
                "name": "f",
              },
            },
            {
              "guard": {
                "fn": {
                  "args": [
                    {
                      "name": "a",
                    },
                  ],
                  "ret": {
                    "name": "b",
                  },
                },
              },
              "name": {
                "name": "g",
              },
            },
          ],
          "return_type": {
            "fn": {
              "args": [
                {
                  "name": "a",
                },
              ],
              "ret": {
                "name": "c",
              },
            },
          },
          "type_params": [
            {
              "name": "a",
            },
            {
              "name": "b",
            },
            {
              "name": "c",
            },
          ],
        },
        "pub": false,
      },
    },
  },
]
`;

exports[`Declaration: pub fn fold<t, acc>(list: List<t>, init: acc, f: (acc, t) -> acc): acc { init } matches snapshot: Declaration: pub fn fold<t, acc>(list: List<t>, init: acc, f: (acc, t) -> acc): acc { init } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "name": "init",
                },
              },
            ],
          },
          "name": {
            "name": "fold",
          },
          "params": [
            {
              "guard": {
                "app": {
                  "args": [
                    {
                      "name": "t",
                    },
                  ],
                  "callee": {
                    "type": "List",
                  },
                },
              },
              "name": {
                "name": "list",
              },
            },
            {
              "guard": {
                "name": "acc",
              },
              "name": {
                "name": "init",
              },
            },
            {
              "guard": {
                "fn": {
                  "args": [
                    {
                      "name": "acc",
                    },
                    {
                      "name": "t",
                    },
                  ],
                  "ret": {
                    "name": "acc",
                  },
                },
              },
              "name": {
                "name": "f",
              },
            },
          ],
          "return_type": {
            "name": "acc",
          },
          "type_params": [
            {
              "name": "t",
            },
            {
              "name": "acc",
            },
          ],
        },
        "pub": true,
      },
    },
  },
]
`;

exports[`Declaration: enum Result<t, e> { Ok(t), Err(e) } matches snapshot: Declaration: enum Result<t, e> { Ok(t), Err(e) } 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "type": "Result",
        },
        "pub": false,
        "type_params": [
          {
            "name": "t",
          },
          {
            "name": "e",
          },
        ],
        "variants": [
          {
            "values": {
              "id": {
                "type": "Ok",
              },
              "values": [
                {
                  "name": "t",
                },
              ],
            },
          },
          {
            "values": {
              "id": {
                "type": "Err",
              },
              "values": [
                {
                  "name": "e",
                },
              ],
            },
          },
        ],
      },
    },
  },
]
`;

exports[`Declaration: pub type Map<k, v> = #{entries: List<#(k, v)>} matches snapshot: Declaration: pub type Map<k, v> = #{entries: List<#(k, v)>} 1`] = `
[
  null,
  {
    "ok": {
      "type_dec": {
        "id": {
          "type": "Map",
        },
        "params": [
          {
            "name": "k",
          },
          {
            "name": "v",
          },
        ],
        "pub": true,
        "value": {
          "record": [
            {
              "name": {
                "name": "entries",
              },
              "ty": {
                "app": {
                  "args": [
                    {
                      "tuple": [
                        {
                          "name": "k",
                        },
                        {
                          "name": "v",
                        },
                      ],
                    },
                  ],
                  "callee": {
                    "type": "List",
                  },
                },
              },
            },
          ],
        },
      },
    },
  },
]
`;

exports[`Declaration: enum Tree<t> { Leaf, Node { value: t, left: Tree<t>, right: Tree<t> } } matches snapshot: Declaration: enum Tree<t> { Leaf, Node { value: t, left: Tree<t>, right: Tree<t> } } 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "type": "Tree",
        },
        "pub": false,
        "type_params": [
          {
            "name": "t",
          },
        ],
        "variants": [
          {
            "values": {
              "id": {
                "type": "Leaf",
              },
              "values": [],
            },
          },
          {
            "fields": {
              "fields": [
                {
                  "name": {
                    "name": "value",
                  },
                  "ty": {
                    "name": "t",
                  },
                },
                {
                  "name": {
                    "name": "left",
                  },
                  "ty": {
                    "app": {
                      "args": [
                        {
                          "name": "t",
                        },
                      ],
                      "callee": {
                        "type": "Tree",
                      },
                    },
                  },
                },
                {
                  "name": {
                    "name": "right",
                  },
                  "ty": {
                    "app": {
                      "args": [
                        {
                          "name": "t",
                        },
                      ],
                      "callee": {
                        "type": "Tree",
                      },
                    },
                  },
                },
              ],
              "id": {
                "type": "Node",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`Declaration: pub enum Message { Quit, Move { x: i32, y: i32 }, Write(String), ChangeColor(i32, i32, i32) } matches snapshot: Declaration: pub enum Message { Quit, Move { x: i32, y: i32 }, Write(String), ChangeColor(i32, i32, i32) } 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "type": "Message",
        },
        "pub": true,
        "type_params": [],
        "variants": [
          {
            "values": {
              "id": {
                "type": "Quit",
              },
              "values": [],
            },
          },
          {
            "fields": {
              "fields": [
                {
                  "name": {
                    "name": "x",
                  },
                  "ty": {
                    "name": "i32",
                  },
                },
                {
                  "name": {
                    "name": "y",
                  },
                  "ty": {
                    "name": "i32",
                  },
                },
              ],
              "id": {
                "type": "Move",
              },
            },
          },
          {
            "values": {
              "id": {
                "type": "Write",
              },
              "values": [
                {
                  "type": "String",
                },
              ],
            },
          },
          {
            "values": {
              "id": {
                "type": "ChangeColor",
              },
              "values": [
                {
                  "name": "i32",
                },
                {
                  "name": "i32",
                },
                {
                  "name": "i32",
                },
              ],
            },
          },
        ],
      },
    },
  },
]
`;

exports[`Declaration: trait Numeric { fn add(other: Self): Self fn mul(other: Self): Self fn zero(): Self } matches snapshot: Declaration: trait Numeric { fn add(other: Self): Self fn mul(other: Self): Self fn zero(): Self } 1`] = `
[
  null,
  {
    "ok": {
      "trait": {
        "fns": [
          {
            "name": {
              "name": "add",
            },
            "params": [
              {
                "name": {
                  "name": "other",
                },
                "ty": {
                  "type": "Self",
                },
              },
            ],
            "return_type": {
              "type": "Self",
            },
            "type_params": [],
          },
          {
            "name": {
              "name": "mul",
            },
            "params": [
              {
                "name": {
                  "name": "other",
                },
                "ty": {
                  "type": "Self",
                },
              },
            ],
            "return_type": {
              "type": "Self",
            },
            "type_params": [],
          },
          {
            "name": {
              "name": "zero",
            },
            "params": [],
            "return_type": {
              "type": "Self",
            },
            "type_params": [],
          },
        ],
        "id": {
          "type": "Numeric",
        },
        "pub": false,
        "type_params": [],
      },
    },
  },
]
`;

exports[`Declaration: import "std" { fn print(msg: String): Void, type String, memory "mem": 1 10 as mem } matches snapshot: Declaration: import "std" { fn print(msg: String): Void, type String, memory "mem": 1 10 as mem } 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "std",
        "imports": [
          {
            "fn": {
              "alias": null,
              "name": {
                "name": "print",
              },
              "signature": {
                "param_types": [
                  {
                    "guard": {
                      "type": "String",
                    },
                    "name": {
                      "name": "msg",
                    },
                  },
                ],
                "return_type": {
                  "type": "Void",
                },
              },
            },
          },
          {
            "type": {
              "alias": null,
              "name": {
                "type": "String",
              },
            },
          },
          {
            "memory": {
              "alias": {
                "name": "mem",
              },
              "max": {
                "int": 10n,
              },
              "min": {
                "int": 1n,
              },
              "name": {
                "string": "mem",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`Declaration: import "core" { trait Eq, trait Ord, enum Option, enum Result } matches snapshot: Declaration: import "core" { trait Eq, trait Ord, enum Option, enum Result } 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "core",
        "imports": [
          {
            "trait": {
              "alias": null,
              "name": {
                "type": "Eq",
              },
            },
          },
          {
            "trait": {
              "alias": null,
              "name": {
                "type": "Ord",
              },
            },
          },
          {
            "enum": {
              "alias": null,
              "name": {
                "type": "Option",
              },
            },
          },
          {
            "enum": {
              "alias": null,
              "name": {
                "type": "Result",
              },
            },
          },
        ],
      },
    },
  },
]
`;

exports[`Declaration: fn side_effect(x: Int) { print(x) } matches snapshot: Declaration: fn side_effect(x: Int) { print(x) } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "call": [
                    {
                      "name": "print",
                    },
                    [
                      {
                        "name": "x",
                      },
                    ],
                  ],
                },
              },
            ],
          },
          "name": {
            "name": "side_effect",
          },
          "params": [
            {
              "guard": {
                "type": "Int",
              },
              "name": {
                "name": "x",
              },
            },
          ],
          "return_type": null,
          "type_params": [],
        },
        "pub": false,
      },
    },
  },
]
`;

exports[`Declaration: fn factorial(n: Int): Int { if n <= 1 { 1 } else { n * factorial(n - 1) } } matches snapshot: Declaration: fn factorial(n: Int): Int { if n <= 1 { 1 } else { n * factorial(n - 1) } } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "if_expr": {
                    "cond": {
                      "infix": {
                        "left": {
                          "name": "n",
                        },
                        "op": "<=",
                        "right": {
                          "int": {
                            "size": 32,
                            "value": 1n,
                          },
                        },
                      },
                    },
                    "else_body": {
                      "block": [
                        {
                          "expression": {
                            "infix": {
                              "left": {
                                "name": "n",
                              },
                              "op": "*",
                              "right": {
                                "call": [
                                  {
                                    "name": "factorial",
                                  },
                                  [
                                    {
                                      "infix": {
                                        "left": {
                                          "name": "n",
                                        },
                                        "op": "-",
                                        "right": {
                                          "int": {
                                            "size": 32,
                                            "value": 1n,
                                          },
                                        },
                                      },
                                    },
                                  ],
                                ],
                              },
                            },
                          },
                        },
                      ],
                    },
                    "if_body": {
                      "block": [
                        {
                          "expression": {
                            "int": {
                              "size": 32,
                              "value": 1n,
                            },
                          },
                        },
                      ],
                    },
                  },
                },
              },
            ],
          },
          "name": {
            "name": "factorial",
          },
          "params": [
            {
              "guard": {
                "type": "Int",
              },
              "name": {
                "name": "n",
              },
            },
          ],
          "return_type": {
            "type": "Int",
          },
          "type_params": [],
        },
        "pub": false,
      },
    },
  },
]
`;

exports[`Declaration: fn process(data: List<Int>): Int { let sum = data.fold(0, fn(acc, x) { acc + x }); sum / data.length() } matches snapshot: Declaration: fn process(data: List<Int>): Int { let sum = data.fold(0, fn(acc, x) { acc + x }); sum / data.length() } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "let_bind": {
                  "assert": false,
                  "expression": {
                    "call": [
                      {
                        "select": [
                          {
                            "name": "data",
                          },
                          {
                            "name": "fold",
                          },
                        ],
                      },
                      [
                        {
                          "int": {
                            "size": 32,
                            "value": 0n,
                          },
                        },
                        {
                          "fn": {
                            "body": {
                              "block": [
                                {
                                  "expression": {
                                    "infix": {
                                      "left": {
                                        "name": "acc",
                                      },
                                      "op": "+",
                                      "right": {
                                        "name": "x",
                                      },
                                    },
                                  },
                                },
                              ],
                            },
                            "name": null,
                            "params": [
                              {
                                "guard": null,
                                "name": {
                                  "name": "acc",
                                },
                              },
                              {
                                "guard": null,
                                "name": {
                                  "name": "x",
                                },
                              },
                            ],
                            "return_type": null,
                            "type_params": [],
                          },
                        },
                      ],
                    ],
                  },
                  "pattern": {
                    "name": "sum",
                  },
                },
              },
              {
                "expression": {
                  "infix": {
                    "left": {
                      "name": "sum",
                    },
                    "op": "/",
                    "right": {
                      "call": [
                        {
                          "select": [
                            {
                              "name": "data",
                            },
                            {
                              "name": "length",
                            },
                          ],
                        },
                        [],
                      ],
                    },
                  },
                },
              },
            ],
          },
          "name": {
            "name": "process",
          },
          "params": [
            {
              "guard": {
                "app": {
                  "args": [
                    {
                      "type": "Int",
                    },
                  ],
                  "callee": {
                    "type": "List",
                  },
                },
              },
              "name": {
                "name": "data",
              },
            },
          ],
          "return_type": {
            "type": "Int",
          },
          "type_params": [],
        },
        "pub": false,
      },
    },
  },
]
`;

exports[`Declaration: builtin "i32.add" as i32_add(a: I32, b: I32): I32 matches snapshot: Declaration: builtin "i32.add" as i32_add(a: I32, b: I32): I32 1`] = `
[
  null,
  {
    "ok": {
      "builtin": {
        "alias": {
          "name": "i32_add",
        },
        "name": {
          "string": "i32.add",
        },
        "params": [
          {
            "guard": {
              "type": "I32",
            },
            "name": {
              "name": "a",
            },
          },
          {
            "guard": {
              "type": "I32",
            },
            "name": {
              "name": "b",
            },
          },
        ],
        "return_type": {
          "type": "I32",
        },
      },
    },
  },
]
`;

exports[`Edge case: foo() matches snapshot: EdgeCase: foo() 1`] = `
{
  "ok": {
    "call": [
      {
        "name": "foo",
      },
      [],
    ],
  },
}
`;

exports[`Edge case: #() matches snapshot: EdgeCase: #() 1`] = `
{
  "ok": {
    "tuple": [],
  },
}
`;

exports[`Edge case: #{} matches snapshot: EdgeCase: #{} 1`] = `
{
  "ok": {
    "record": [],
  },
}
`;

exports[`Edge case: MyEnum matches snapshot: EdgeCase: MyEnum 1`] = `
{
  "ok": {
    "type": "MyEnum",
  },
}
`;

exports[`Edge case: a(b(c(d(e())))) matches snapshot: EdgeCase: a(b(c(d(e())))) 1`] = `
{
  "ok": {
    "call": [
      {
        "name": "a",
      },
      [
        {
          "call": [
            {
              "name": "b",
            },
            [
              {
                "call": [
                  {
                    "name": "c",
                  },
                  [
                    {
                      "call": [
                        {
                          "name": "d",
                        },
                        [
                          {
                            "call": [
                              {
                                "name": "e",
                              },
                              [],
                            ],
                          },
                        ],
                      ],
                    },
                  ],
                ],
              },
            ],
          ],
        },
      ],
    ],
  },
}
`;

exports[`Edge case: ((((a)))) matches snapshot: EdgeCase: ((((a)))) 1`] = `
{
  "ok": {
    "name": "a",
  },
}
`;

exports[`Edge case: foo().bar + baz().qux * 2 matches snapshot: EdgeCase: foo().bar + baz().qux * 2 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "select": [
          {
            "call": [
              {
                "name": "foo",
              },
              [],
            ],
          },
          {
            "name": "bar",
          },
        ],
      },
      "op": "+",
      "right": {
        "infix": {
          "left": {
            "select": [
              {
                "call": [
                  {
                    "name": "baz",
                  },
                  [],
                ],
              },
              {
                "name": "qux",
              },
            ],
          },
          "op": "*",
          "right": {
            "int": {
              "size": 32,
              "value": 2n,
            },
          },
        },
      },
    },
  },
}
`;

exports[`Edge case: (a + b)(c, d) matches snapshot: EdgeCase: (a + b)(c, d) 1`] = `
{
  "ok": {
    "infix": {
      "left": {
        "name": "a",
      },
      "op": "+",
      "right": {
        "name": "b",
      },
    },
  },
}
`;

exports[`Match with guard: match x { Some(y) if (y > 0) => y, _ => 0 } matches snapshot: MatchWithGuard: match x { Some(y) if (y > 0) => y, _ => 0 } 1`] = `
{
  "ok": {
    "match": [
      {
        "name": "x",
      },
      [
        {
          "body": {
            "name": "y",
          },
          "guard": {
            "infix": {
              "left": {
                "name": "y",
              },
              "op": ">",
              "right": {
                "int": {
                  "size": 32,
                  "value": 0n,
                },
              },
            },
          },
          "pattern": {
            "constr": {
              "patterns": [
                {
                  "name": "y",
                },
              ],
              "type": {
                "type": "Some",
              },
            },
          },
        },
        {
          "body": {
            "int": {
              "size": 32,
              "value": 0n,
            },
          },
          "guard": null,
          "pattern": {
            "name": "_",
          },
        },
      ],
    ],
  },
}
`;

exports[`Match with guard: match point { #(x, y) if (x == y) => x, #(x, _) => x, _ => 0 } matches snapshot: MatchWithGuard: match point { #(x, y) if (x == y) => x, #(x, _) => x, _ => 0 } 1`] = `
{
  "ok": {
    "match": [
      {
        "name": "point",
      },
      [
        {
          "body": {
            "name": "x",
          },
          "guard": {
            "infix": {
              "left": {
                "name": "x",
              },
              "op": "==",
              "right": {
                "name": "y",
              },
            },
          },
          "pattern": {
            "tuple": [
              {
                "name": "x",
              },
              {
                "name": "y",
              },
            ],
          },
        },
        {
          "body": {
            "name": "x",
          },
          "guard": null,
          "pattern": {
            "tuple": [
              {
                "name": "x",
              },
              {
                "name": "_",
              },
            ],
          },
        },
        {
          "body": {
            "int": {
              "size": 32,
              "value": 0n,
            },
          },
          "guard": null,
          "pattern": {
            "name": "_",
          },
        },
      ],
    ],
  },
}
`;

exports[`Match with guard: match value { n if (n < 0) => -n, n if (n > 100) => 100, n => n } matches snapshot: MatchWithGuard: match value { n if (n < 0) => -n, n if (n > 100) => 100, n => n } 1`] = `
{
  "ok": {
    "match": [
      {
        "name": "value",
      },
      [
        {
          "body": {
            "prefix": {
              "op": "-",
              "operand": {
                "name": "n",
              },
            },
          },
          "guard": {
            "infix": {
              "left": {
                "name": "n",
              },
              "op": "<",
              "right": {
                "int": {
                  "size": 32,
                  "value": 0n,
                },
              },
            },
          },
          "pattern": {
            "name": "n",
          },
        },
        {
          "body": {
            "int": {
              "size": 32,
              "value": 100n,
            },
          },
          "guard": {
            "infix": {
              "left": {
                "name": "n",
              },
              "op": ">",
              "right": {
                "int": {
                  "size": 32,
                  "value": 100n,
                },
              },
            },
          },
          "pattern": {
            "name": "n",
          },
        },
        {
          "body": {
            "name": "n",
          },
          "guard": null,
          "pattern": {
            "name": "n",
          },
        },
      ],
    ],
  },
}
`;
