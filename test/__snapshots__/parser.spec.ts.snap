// Bun Snapshot v1, https://bun.sh/docs/test/snapshots

exports[`1 matches snapshot: Expression: 1 1`] = `
[
  null,
  {
    "ok": {
      "int": {
        "size": 32,
        "value": 1n,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`a matches snapshot: Expression: a 1`] = `
[
  null,
  {
    "ok": {
      "name": "a",
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`"testing" matches snapshot: Expression: "testing" 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "string": "testing",
    },
  },
]
`;

exports[`a + b * c - d matches snapshot: Expression: a + b * c - d 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "infix": {
            "left": {
              "name": "a",
              "position": [
                1,
                1,
              ],
            },
            "op": "+",
            "right": {
              "infix": {
                "left": {
                  "name": "b",
                  "position": [
                    1,
                    1,
                  ],
                },
                "op": "*",
                "right": {
                  "name": "c",
                  "position": [
                    1,
                    1,
                  ],
                },
              },
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        "op": "-",
        "right": {
          "name": "d",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`a + b + c + d matches snapshot: Expression: a + b + c + d 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "infix": {
            "left": {
              "infix": {
                "left": {
                  "name": "a",
                  "position": [
                    1,
                    1,
                  ],
                },
                "op": "+",
                "right": {
                  "name": "b",
                  "position": [
                    1,
                    1,
                  ],
                },
              },
              "position": [
                1,
                1,
              ],
            },
            "op": "+",
            "right": {
              "name": "c",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        "op": "+",
        "right": {
          "name": "d",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`a ** b ** c ** d matches snapshot: Expression: a ** b ** c ** d 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "**",
        "right": {
          "infix": {
            "left": {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
            "op": "**",
            "right": {
              "infix": {
                "left": {
                  "name": "c",
                  "position": [
                    1,
                    1,
                  ],
                },
                "op": "**",
                "right": {
                  "name": "d",
                  "position": [
                    1,
                    1,
                  ],
                },
              },
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`(a + b) * c matches snapshot: Expression: (a + b) * c 1`] = `
[
  {
    "position": [
      1,
      1,
    ],
    "symbol": ")",
  },
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "+",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`foo() matches snapshot: Expression: foo() 1`] = `
[
  null,
  {
    "ok": {
      "call": [
        {
          "name": "foo",
          "position": [
            1,
            1,
          ],
        },
        [],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`foo(1, 2, bar) matches snapshot: Expression: foo(1, 2, bar) 1`] = `
[
  null,
  {
    "ok": {
      "call": [
        {
          "name": "foo",
          "position": [
            1,
            1,
          ],
        },
        [
          {
            "int": {
              "size": 32,
              "value": 1n,
            },
            "position": [
              1,
              1,
            ],
          },
          {
            "int": {
              "size": 32,
              "value": 2n,
            },
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "bar",
            "position": [
              1,
              1,
            ],
          },
        ],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`obj.field matches snapshot: Expression: obj.field 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "select": [
        {
          "name": "obj",
          "position": [
            1,
            1,
          ],
        },
        {
          "name": "field",
          "position": [
            1,
            1,
          ],
        },
      ],
    },
  },
]
`;

exports[`obj.method(x, y) matches snapshot: Expression: obj.method(x, y) 1`] = `
[
  null,
  {
    "ok": {
      "call": [
        {
          "position": [
            1,
            1,
          ],
          "select": [
            {
              "name": "obj",
              "position": [
                1,
                1,
              ],
            },
            {
              "name": "method",
              "position": [
                1,
                1,
              ],
            },
          ],
        },
        [
          {
            "name": "x",
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "y",
            "position": [
              1,
              1,
            ],
          },
        ],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`MyType matches snapshot: Expression: MyType 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "type": "MyType",
    },
  },
]
`;

exports[`MyType() matches snapshot: Expression: MyType() 1`] = `
[
  null,
  {
    "ok": {
      "call": [
        {
          "position": [
            1,
            1,
          ],
          "type": "MyType",
        },
        [],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`#(1, 2, 3) matches snapshot: Expression: #(1, 2, 3) 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "tuple": [
        {
          "int": {
            "size": 32,
            "value": 1n,
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "int": {
            "size": 32,
            "value": 2n,
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "int": {
            "size": 32,
            "value": 3n,
          },
          "position": [
            1,
            1,
          ],
        },
      ],
    },
  },
]
`;

exports[`#{x: 1, y: 2} matches snapshot: Expression: #{x: 1, y: 2} 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "record": [
        [
          {
            "name": "x",
            "position": [
              1,
              1,
            ],
          },
          {
            "int": {
              "size": 32,
              "value": 1n,
            },
            "position": [
              1,
              1,
            ],
          },
        ],
        [
          {
            "name": "y",
            "position": [
              1,
              1,
            ],
          },
          {
            "int": {
              "size": 32,
              "value": 2n,
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      ],
    },
  },
]
`;

exports[`{ a; b; c } matches snapshot: Expression: { a; b; c } 1`] = `
[
  null,
  {
    "ok": {
      "block": [
        {
          "expression": {
            "name": "a",
            "position": [
              1,
              1,
            ],
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "expression": {
            "name": "b",
            "position": [
              1,
              1,
            ],
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "expression": {
            "name": "c",
            "position": [
              1,
              1,
            ],
          },
          "position": [
            1,
            1,
          ],
        },
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`{ let x = 1; x + 2 } matches snapshot: Expression: { let x = 1; x + 2 } 1`] = `
[
  null,
  {
    "ok": {
      "block": [
        {
          "let_bind": {
            "assert": false,
            "expression": {
              "int": {
                "size": 32,
                "value": 1n,
              },
              "position": [
                1,
                1,
              ],
            },
            "pattern": {
              "name": "x",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "expression": {
            "infix": {
              "left": {
                "name": "x",
                "position": [
                  1,
                  1,
                ],
              },
              "op": "+",
              "right": {
                "int": {
                  "size": 32,
                  "value": 2n,
                },
                "position": [
                  1,
                  1,
                ],
              },
            },
            "position": [
              1,
              1,
            ],
          },
          "position": [
            1,
            1,
          ],
        },
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`if a { b } else { c } matches snapshot: Expression: if a { b } else { c } 1`] = `
[
  null,
  {
    "ok": {
      "if_expr": {
        "cond": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "else_body": {
          "block": [
            {
              "expression": {
                "name": "c",
                "position": [
                  1,
                  1,
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
        "if_body": {
          "block": [
            {
              "expression": {
                "name": "b",
                "position": [
                  1,
                  1,
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`if a { b } matches snapshot: Expression: if a { b } 1`] = `
[
  null,
  {
    "ok": {
      "if_expr": {
        "cond": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "else_body": null,
        "if_body": {
          "block": [
            {
              "expression": {
                "name": "b",
                "position": [
                  1,
                  1,
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`match x { A => 1, B => 2, _ => 3 } matches snapshot: Expression: match x { A => 1, B => 2, _ => 3 } 1`] = `
[
  null,
  {
    "ok": {
      "match": [
        {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
        [
          {
            "body": {
              "int": {
                "size": 32,
                "value": 1n,
              },
              "position": [
                1,
                1,
              ],
            },
            "guard": null,
            "pattern": {
              "constr": {
                "patterns": [],
                "type": {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "A",
                },
              },
              "position": [
                1,
                1,
              ],
            },
          },
          {
            "body": {
              "int": {
                "size": 32,
                "value": 2n,
              },
              "position": [
                1,
                1,
              ],
            },
            "guard": null,
            "pattern": {
              "constr": {
                "patterns": [],
                "type": {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "B",
                },
              },
              "position": [
                1,
                1,
              ],
            },
          },
          {
            "body": {
              "int": {
                "size": 32,
                "value": 3n,
              },
              "position": [
                1,
                1,
              ],
            },
            "guard": null,
            "pattern": {
              "name": "_",
              "position": [
                1,
                1,
              ],
            },
          },
        ],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`{ a <- try(explosion()) } matches snapshot: Expression: { a <- try(explosion()) } 1`] = `
[
  null,
  {
    "ok": {
      "block": [
        {
          "arrow_bind": {
            "expression": {
              "call": [
                {
                  "name": "try",
                  "position": [
                    1,
                    1,
                  ],
                },
                [
                  {
                    "call": [
                      {
                        "name": "explosion",
                        "position": [
                          1,
                          1,
                        ],
                      },
                      [],
                    ],
                    "position": [
                      1,
                      1,
                    ],
                  },
                ],
              ],
              "position": [
                1,
                1,
              ],
            },
            "name": {
              "name": "a",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`foo(1).bar(2, 3).baz matches snapshot: Expression: foo(1).bar(2, 3).baz 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "select": [
        {
          "call": [
            {
              "position": [
                1,
                1,
              ],
              "select": [
                {
                  "call": [
                    {
                      "name": "foo",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    [
                      {
                        "int": {
                          "size": 32,
                          "value": 1n,
                        },
                        "position": [
                          1,
                          1,
                        ],
                      },
                    ],
                  ],
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "name": "bar",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
            [
              {
                "int": {
                  "size": 32,
                  "value": 2n,
                },
                "position": [
                  1,
                  1,
                ],
              },
              {
                "int": {
                  "size": 32,
                  "value": 3n,
                },
                "position": [
                  1,
                  1,
                ],
              },
            ],
          ],
          "position": [
            1,
            1,
          ],
        },
        {
          "name": "baz",
          "position": [
            1,
            1,
          ],
        },
      ],
    },
  },
]
`;

exports[`if match x { A => true, _ => false } { 1 } else { 0 } matches snapshot: Expression: if match x { A => true, _ => false } { 1 } else { 0 } 1`] = `
[
  null,
  {
    "ok": {
      "if_expr": {
        "cond": {
          "match": [
            {
              "name": "x",
              "position": [
                1,
                1,
              ],
            },
            [
              {
                "body": {
                  "bool": true,
                  "position": [
                    1,
                    1,
                  ],
                },
                "guard": null,
                "pattern": {
                  "constr": {
                    "patterns": [],
                    "type": {
                      "position": [
                        1,
                        1,
                      ],
                      "type": "A",
                    },
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
              },
              {
                "body": {
                  "bool": false,
                  "position": [
                    1,
                    1,
                  ],
                },
                "guard": null,
                "pattern": {
                  "name": "_",
                  "position": [
                    1,
                    1,
                  ],
                },
              },
            ],
          ],
          "position": [
            1,
            1,
          ],
        },
        "else_body": {
          "block": [
            {
              "expression": {
                "int": {
                  "size": 32,
                  "value": 0n,
                },
                "position": [
                  1,
                  1,
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
        "if_body": {
          "block": [
            {
              "expression": {
                "int": {
                  "size": 32,
                  "value": 1n,
                },
                "position": [
                  1,
                  1,
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`x matches snapshot: PatternExpression: x 1`] = `
[
  null,
  {
    "ok": {
      "name": "x",
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`_wild matches snapshot: PatternExpression: _wild 1`] = `
[
  null,
  {
    "ok": {
      "name": "_wild",
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Some matches snapshot: PatternExpression: Some 1`] = `
[
  null,
  {
    "ok": {
      "constr": {
        "patterns": [],
        "type": {
          "position": [
            1,
            1,
          ],
          "type": "Some",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Some(42) matches snapshot: PatternExpression: Some(42) 1`] = `
[
  null,
  {
    "ok": {
      "constr": {
        "patterns": [
          {
            "int": {
              "size": 32,
              "value": 42n,
            },
            "position": [
              1,
              1,
            ],
          },
        ],
        "type": {
          "position": [
            1,
            1,
          ],
          "type": "Some",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Pair(1, x) matches snapshot: PatternExpression: Pair(1, x) 1`] = `
[
  null,
  {
    "ok": {
      "constr": {
        "patterns": [
          {
            "int": {
              "size": 32,
              "value": 1n,
            },
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "x",
            "position": [
              1,
              1,
            ],
          },
        ],
        "type": {
          "position": [
            1,
            1,
          ],
          "type": "Pair",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`123 matches snapshot: PatternExpression: 123 1`] = `
[
  null,
  {
    "ok": {
      "int": {
        "size": 32,
        "value": 123n,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`3.14 matches snapshot: PatternExpression: 3.14 1`] = `
[
  null,
  {
    "ok": {
      "float": {
        "size": 64,
        "value": 3.14,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`"hello" matches snapshot: PatternExpression: "hello" 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "string": "hello",
    },
  },
]
`;

exports[`nan matches snapshot: PatternExpression: nan 1`] = `
[
  null,
  {
    "ok": {
      "float": {
        "size": 64,
        "value": NaN,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`inf matches snapshot: PatternExpression: inf 1`] = `
[
  null,
  {
    "ok": {
      "float": {
        "size": 64,
        "value": Infinity,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`#(x, y) matches snapshot: PatternExpression: #(x, y) 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "tuple": [
        {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
        {
          "name": "y",
          "position": [
            1,
            1,
          ],
        },
      ],
    },
  },
]
`;

exports[`#(1, 2, 3) matches snapshot: PatternExpression: #(1, 2, 3) 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "tuple": [
        {
          "int": {
            "size": 32,
            "value": 1n,
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "int": {
            "size": 32,
            "value": 2n,
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "int": {
            "size": 32,
            "value": 3n,
          },
          "position": [
            1,
            1,
          ],
        },
      ],
    },
  },
]
`;

exports[`#() matches snapshot: PatternExpression: #() 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "tuple": [],
    },
  },
]
`;

exports[`#{foo: x, bar: 42} matches snapshot: PatternExpression: #{foo: x, bar: 42} 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "record": [
        [
          {
            "name": "foo",
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "x",
            "position": [
              1,
              1,
            ],
          },
        ],
        [
          {
            "name": "bar",
            "position": [
              1,
              1,
            ],
          },
          {
            "int": {
              "size": 32,
              "value": 42n,
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      ],
    },
  },
]
`;

exports[`#{nested: Pair(x, y)} matches snapshot: PatternExpression: #{nested: Pair(x, y)} 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "record": [
        [
          {
            "name": "nested",
            "position": [
              1,
              1,
            ],
          },
          {
            "constr": {
              "patterns": [
                {
                  "name": "x",
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "name": "y",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
              "type": {
                "position": [
                  1,
                  1,
                ],
                "type": "Pair",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      ],
    },
  },
]
`;

exports[`Some(#(x, #{y: 1})) matches snapshot: PatternExpression: Some(#(x, #{y: 1})) 1`] = `
[
  null,
  {
    "ok": {
      "constr": {
        "patterns": [
          {
            "position": [
              1,
              1,
            ],
            "tuple": [
              {
                "name": "x",
                "position": [
                  1,
                  1,
                ],
              },
              {
                "position": [
                  1,
                  1,
                ],
                "record": [
                  [
                    {
                      "name": "y",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    {
                      "int": {
                        "size": 32,
                        "value": 1n,
                      },
                      "position": [
                        1,
                        1,
                      ],
                    },
                  ],
                ],
              },
            ],
          },
        ],
        "type": {
          "position": [
            1,
            1,
          ],
          "type": "Some",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Int matches snapshot: TypeExpression: Int 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "type": "Int",
    },
  },
]
`;

exports[`MyNamespace.Type matches snapshot: TypeExpression: MyNamespace.Type 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "select": {
        "name": {
          "position": [
            1,
            1,
          ],
          "type": "Type",
        },
        "root": {
          "position": [
            1,
            1,
          ],
          "type": "MyNamespace",
        },
      },
    },
  },
]
`;

exports[`(Int) => Bool matches snapshot: TypeExpression: (Int) => Bool 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "args": [
          {
            "position": [
              1,
              1,
            ],
            "type": "Int",
          },
        ],
        "ret": {
          "position": [
            1,
            1,
          ],
          "type": "Bool",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`(Int, String) => Bool matches snapshot: TypeExpression: (Int, String) => Bool 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "args": [
          {
            "position": [
              1,
              1,
            ],
            "type": "Int",
          },
          {
            "position": [
              1,
              1,
            ],
            "type": "String",
          },
        ],
        "ret": {
          "position": [
            1,
            1,
          ],
          "type": "Bool",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`() => Void matches snapshot: TypeExpression: () => Void 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "args": [],
        "ret": {
          "position": [
            1,
            1,
          ],
          "type": "Void",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`#(Int, Bool, String) matches snapshot: TypeExpression: #(Int, Bool, String) 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "tuple": [
        {
          "position": [
            1,
            1,
          ],
          "type": "Int",
        },
        {
          "position": [
            1,
            1,
          ],
          "type": "Bool",
        },
        {
          "position": [
            1,
            1,
          ],
          "type": "String",
        },
      ],
    },
  },
]
`;

exports[`#() matches snapshot: TypeExpression: #() 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "tuple": [],
    },
  },
]
`;

exports[`#{x: Int, y: Bool} matches snapshot: TypeExpression: #{x: Int, y: Bool} 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "record": [
        {
          "name": {
            "name": "x",
            "position": [
              1,
              1,
            ],
          },
          "ty": {
            "position": [
              1,
              1,
            ],
            "type": "Int",
          },
        },
        {
          "name": {
            "name": "y",
            "position": [
              1,
              1,
            ],
          },
          "ty": {
            "position": [
              1,
              1,
            ],
            "type": "Bool",
          },
        },
      ],
    },
  },
]
`;

exports[`#{nested: #(Int, String), flag: Bool} matches snapshot: TypeExpression: #{nested: #(Int, String), flag: Bool} 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "record": [
        {
          "name": {
            "name": "nested",
            "position": [
              1,
              1,
            ],
          },
          "ty": {
            "position": [
              1,
              1,
            ],
            "tuple": [
              {
                "position": [
                  1,
                  1,
                ],
                "type": "Int",
              },
              {
                "position": [
                  1,
                  1,
                ],
                "type": "String",
              },
            ],
          },
        },
        {
          "name": {
            "name": "flag",
            "position": [
              1,
              1,
            ],
          },
          "ty": {
            "position": [
              1,
              1,
            ],
            "type": "Bool",
          },
        },
      ],
    },
  },
]
`;

exports[`#{a: Int}.a matches snapshot: TypeExpression: #{a: Int}.a 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "select": {
        "name": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "root": {
          "position": [
            1,
            1,
          ],
          "record": [
            {
              "name": {
                "name": "a",
                "position": [
                  1,
                  1,
                ],
              },
              "ty": {
                "position": [
                  1,
                  1,
                ],
                "type": "Int",
              },
            },
          ],
        },
      },
    },
  },
]
`;

exports[`List<Int> matches snapshot: TypeExpression: List<Int> 1`] = `
[
  null,
  {
    "ok": {
      "app": {
        "args": [
          {
            "position": [
              1,
              1,
            ],
            "type": "Int",
          },
        ],
        "callee": {
          "position": [
            1,
            1,
          ],
          "type": "List",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Map<String, Int> matches snapshot: TypeExpression: Map<String, Int> 1`] = `
[
  null,
  {
    "ok": {
      "app": {
        "args": [
          {
            "position": [
              1,
              1,
            ],
            "type": "String",
          },
          {
            "position": [
              1,
              1,
            ],
            "type": "Int",
          },
        ],
        "callee": {
          "position": [
            1,
            1,
          ],
          "type": "Map",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Outer.Inner<Nested<T>> matches snapshot: TypeExpression: Outer.Inner<Nested<T>> 1`] = `
[
  null,
  {
    "ok": {
      "app": {
        "args": [
          {
            "app": {
              "args": [
                {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "T",
                },
              ],
              "callee": {
                "position": [
                  1,
                  1,
                ],
                "type": "Nested",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
        "callee": {
          "position": [
            1,
            1,
          ],
          "select": {
            "name": {
              "position": [
                1,
                1,
              ],
              "type": "Inner",
            },
            "root": {
              "position": [
                1,
                1,
              ],
              "type": "Outer",
            },
          },
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`(Int, List<String>) => Map<String, Int> matches snapshot: TypeExpression: (Int, List<String>) => Map<String, Int> 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "args": [
          {
            "position": [
              1,
              1,
            ],
            "type": "Int",
          },
          {
            "app": {
              "args": [
                {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "String",
                },
              ],
              "callee": {
                "position": [
                  1,
                  1,
                ],
                "type": "List",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
        "ret": {
          "app": {
            "args": [
              {
                "position": [
                  1,
                  1,
                ],
                "type": "String",
              },
              {
                "position": [
                  1,
                  1,
                ],
                "type": "Int",
              },
            ],
            "callee": {
              "position": [
                1,
                1,
              ],
              "type": "Map",
            },
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`(#(Int, Bool)) => #{ok: String, err: String} matches snapshot: TypeExpression: (#(Int, Bool)) => #{ok: String, err: String} 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "args": [
          {
            "position": [
              1,
              1,
            ],
            "tuple": [
              {
                "position": [
                  1,
                  1,
                ],
                "type": "Int",
              },
              {
                "position": [
                  1,
                  1,
                ],
                "type": "Bool",
              },
            ],
          },
        ],
        "ret": {
          "position": [
            1,
            1,
          ],
          "record": [
            {
              "name": {
                "name": "ok",
                "position": [
                  1,
                  1,
                ],
              },
              "ty": {
                "position": [
                  1,
                  1,
                ],
                "type": "String",
              },
            },
            {
              "name": {
                "name": "err",
                "position": [
                  1,
                  1,
                ],
              },
              "ty": {
                "position": [
                  1,
                  1,
                ],
                "type": "String",
              },
            },
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`a <- b matches snapshot: BodyExpression: a <- b 1`] = `
[
  null,
  {
    "ok": {
      "arrow_bind": {
        "expression": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
        "name": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`{ a; b; c } matches snapshot: BodyExpression: { a; b; c } 1`] = `
[
  null,
  {
    "ok": {
      "expression": {
        "block": [
          {
            "expression": {
              "name": "a",
              "position": [
                1,
                1,
              ],
            },
            "position": [
              1,
              1,
            ],
          },
          {
            "expression": {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
            "position": [
              1,
              1,
            ],
          },
          {
            "expression": {
              "name": "c",
              "position": [
                1,
                1,
              ],
            },
            "position": [
              1,
              1,
            ],
          },
        ],
        "position": [
          1,
          1,
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`let a = b matches snapshot: BodyExpression: let a = b 1`] = `
[
  null,
  {
    "ok": {
      "let_bind": {
        "assert": false,
        "expression": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
        "pattern": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`let Some(a) = b matches snapshot: BodyExpression: let Some(a) = b 1`] = `
[
  null,
  {
    "ok": {
      "let_bind": {
        "assert": false,
        "expression": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
        "pattern": {
          "constr": {
            "patterns": [
              {
                "name": "a",
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "type": {
              "position": [
                1,
                1,
              ],
              "type": "Some",
            },
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`let assert Some(a) = b matches snapshot: BodyExpression: let assert Some(a) = b 1`] = `
[
  null,
  {
    "ok": {
      "let_bind": {
        "assert": true,
        "expression": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
        "pattern": {
          "constr": {
            "patterns": [
              {
                "name": "a",
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "type": {
              "position": [
                1,
                1,
              ],
              "type": "Some",
            },
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`d = a + b matches snapshot: BodyExpression: d = a + b 1`] = `
[
  null,
  {
    "ok": {
      "assign": {
        "expression": {
          "infix": {
            "left": {
              "name": "a",
              "position": [
                1,
                1,
              ],
            },
            "op": "+",
            "right": {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        "name": {
          "name": "d",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`fn add(x: I32, y: I32): I32 { x + y } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "infix": {
                    "left": {
                      "name": "x",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    "op": "+",
                    "right": {
                      "name": "y",
                      "position": [
                        1,
                        1,
                      ],
                    },
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "position": [
              1,
              1,
            ],
          },
          "name": {
            "name": "add",
            "position": [
              1,
              1,
            ],
          },
          "params": [
            {
              "guard": {
                "position": [
                  1,
                  1,
                ],
                "type": "I32",
              },
              "name": {
                "name": "x",
                "position": [
                  1,
                  1,
                ],
              },
            },
            {
              "guard": {
                "position": [
                  1,
                  1,
                ],
                "type": "I32",
              },
              "name": {
                "name": "y",
                "position": [
                  1,
                  1,
                ],
              },
            },
          ],
          "position": [
            1,
            1,
          ],
          "return_type": {
            "position": [
              1,
              1,
            ],
            "type": "I32",
          },
          "type_params": [],
        },
        "pub": false,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`pub fn main() { 42 } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "int": {
                    "size": 32,
                    "value": 42n,
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "position": [
              1,
              1,
            ],
          },
          "name": {
            "name": "main",
            "position": [
              1,
              1,
            ],
          },
          "params": [],
          "position": [
            1,
            1,
          ],
          "return_type": null,
          "type_params": [],
        },
        "pub": true,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`fn identity<t>(x: t): t { x } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "name": "x",
                  "position": [
                    1,
                    1,
                  ],
                },
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "position": [
              1,
              1,
            ],
          },
          "name": {
            "name": "identity",
            "position": [
              1,
              1,
            ],
          },
          "params": [
            {
              "guard": {
                "name": "t",
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "name": "x",
                "position": [
                  1,
                  1,
                ],
              },
            },
          ],
          "position": [
            1,
            1,
          ],
          "return_type": {
            "name": "t",
            "position": [
              1,
              1,
            ],
          },
          "type_params": [
            {
              "name": "t",
              "position": [
                1,
                1,
              ],
            },
          ],
        },
        "pub": false,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`let x = 42 matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "let_dec": {
        "assert": false,
        "pattern": {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
        "pub": false,
        "value": {
          "int": {
            "size": 32,
            "value": 42n,
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`pub let pi = 3.14159 matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "let_dec": {
        "assert": false,
        "pattern": {
          "name": "pi",
          "position": [
            1,
            1,
          ],
        },
        "pub": true,
        "value": {
          "float": {
            "size": 64,
            "value": 3.14159,
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`let y = true matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "let_dec": {
        "assert": false,
        "pattern": {
          "name": "y",
          "position": [
            1,
            1,
          ],
        },
        "pub": false,
        "value": {
          "bool": true,
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`type MyInt = I32 matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "type_dec": {
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "MyInt",
        },
        "params": [],
        "pub": false,
        "value": {
          "position": [
            1,
            1,
          ],
          "type": "I32",
        },
      },
    },
  },
]
`;

exports[`pub enum Result<t, e> { Ok(t), Err(e) } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "Result",
        },
        "pub": true,
        "recursive": false,
        "type_params": [
          {
            "name": "t",
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "e",
            "position": [
              1,
              1,
            ],
          },
        ],
        "variants": [
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Ok",
              },
              "values": [
                {
                  "name": "t",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
          },
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Err",
              },
              "values": [
                {
                  "name": "e",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`enum Color { Red, Green(I32), Blue { shade: f32 } } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "Color",
        },
        "pub": false,
        "recursive": false,
        "type_params": [],
        "variants": [
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Red",
              },
              "values": [],
            },
          },
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Green",
              },
              "values": [
                {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "I32",
                },
              ],
            },
          },
          {
            "fields": {
              "fields": [
                {
                  "name": {
                    "name": "shade",
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "ty": {
                    "name": "f32",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
              ],
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Blue",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`pub enum Direction { Up, Down, Left, Right } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "Direction",
        },
        "pub": true,
        "recursive": false,
        "type_params": [],
        "variants": [
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Up",
              },
              "values": [],
            },
          },
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Down",
              },
              "values": [],
            },
          },
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Left",
              },
              "values": [],
            },
          },
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Right",
              },
              "values": [],
            },
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`pub trait Eq<t> { fn eq(other: t) : bool } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "trait": {
        "fns": [
          {
            "name": {
              "name": "eq",
              "position": [
                1,
                1,
              ],
            },
            "params": [
              {
                "name": {
                  "name": "other",
                  "position": [
                    1,
                    1,
                  ],
                },
                "ty": {
                  "name": "t",
                  "position": [
                    1,
                    1,
                  ],
                },
              },
            ],
            "position": [
              1,
              1,
            ],
            "return_type": {
              "name": "bool",
              "position": [
                1,
                1,
              ],
            },
            "type_params": [],
          },
        ],
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "Eq",
        },
        "pub": true,
        "type_params": [
          {
            "name": "t",
            "position": [
              1,
              1,
            ],
          },
        ],
      },
    },
  },
]
`;

exports[`trait Drawable { fn draw(): Void fn bounds(): Rect } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "trait": {
        "fns": [
          {
            "name": {
              "name": "draw",
              "position": [
                1,
                1,
              ],
            },
            "params": [],
            "position": [
              1,
              1,
            ],
            "return_type": {
              "position": [
                1,
                1,
              ],
              "type": "Void",
            },
            "type_params": [],
          },
          {
            "name": {
              "name": "bounds",
              "position": [
                1,
                1,
              ],
            },
            "params": [],
            "position": [
              1,
              1,
            ],
            "return_type": {
              "position": [
                1,
                1,
              ],
              "type": "Rect",
            },
            "type_params": [],
          },
        ],
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "Drawable",
        },
        "pub": false,
        "type_params": [],
      },
    },
  },
]
`;

exports[`import "std" { fn print(): Void as out } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "std",
        "imports": [
          {
            "fn": {
              "alias": {
                "name": "out",
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "name": "print",
                "position": [
                  1,
                  1,
                ],
              },
              "signature": {
                "param_types": [],
                "return_type": {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "Void",
                },
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`import "std" { memory "memory": 1 as mem } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "std",
        "imports": [
          {
            "memory": {
              "alias": {
                "name": "mem",
                "position": [
                  1,
                  1,
                ],
              },
              "max": null,
              "min": {
                "int": 1n,
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "position": [
                  1,
                  1,
                ],
                "string": "memory",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`import "std" { global mut count: i32 as cnt } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "std",
        "imports": [
          {
            "global": {
              "alias": {
                "name": "cnt",
                "position": [
                  1,
                  1,
                ],
              },
              "global_type": {
                "name": "i32",
                "position": [
                  1,
                  1,
                ],
              },
              "mut": true,
              "name": {
                "name": "count",
                "position": [
                  1,
                  1,
                ],
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`import "wasm" { table "table": I32 0 0 as tbl } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "wasm",
        "imports": [
          {
            "position": [
              1,
              1,
            ],
            "table": {
              "alias": {
                "name": "tbl",
                "position": [
                  1,
                  1,
                ],
              },
              "max": {
                "int": 0n,
                "position": [
                  1,
                  1,
                ],
              },
              "min": {
                "int": 0n,
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "position": [
                  1,
                  1,
                ],
                "string": "table",
              },
              "table_type": {
                "position": [
                  1,
                  1,
                ],
                "type": "I32",
              },
            },
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`import "wasm" { type Option as Maybe } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "wasm",
        "imports": [
          {
            "position": [
              1,
              1,
            ],
            "type": {
              "alias": {
                "position": [
                  1,
                  1,
                ],
                "type": "Maybe",
              },
              "name": {
                "position": [
                  1,
                  1,
                ],
                "type": "Option",
              },
            },
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`import "wasm" { trait Semiring } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "wasm",
        "imports": [
          {
            "position": [
              1,
              1,
            ],
            "trait": {
              "alias": null,
              "name": {
                "position": [
                  1,
                  1,
                ],
                "type": "Semiring",
              },
            },
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`import "wasm" { item } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "wasm",
        "imports": [
          {
            "name": {
              "alias": null,
              "name": {
                "name": "item",
                "position": [
                  1,
                  1,
                ],
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`import "wasm" { item as blah } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "wasm",
        "imports": [
          {
            "name": {
              "alias": {
                "name": "blah",
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "name": "item",
                "position": [
                  1,
                  1,
                ],
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`import "std" { Some } matches snapshot 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "std",
        "imports": [
          {
            "constr": {
              "alias": null,
              "name": {
                "position": [
                  1,
                  1,
                ],
                "type": "Some",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: self matches snapshot: Expression: self 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "self": null,
    },
  },
]
`;

exports[`Expression: self.field matches snapshot: Expression: self.field 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "select": [
        {
          "position": [
            1,
            1,
          ],
          "self": null,
        },
        {
          "name": "field",
          "position": [
            1,
            1,
          ],
        },
      ],
    },
  },
]
`;

exports[`Expression: self.method() matches snapshot: Expression: self.method() 1`] = `
[
  null,
  {
    "ok": {
      "call": [
        {
          "position": [
            1,
            1,
          ],
          "select": [
            {
              "position": [
                1,
                1,
              ],
              "self": null,
            },
            {
              "name": "method",
              "position": [
                1,
                1,
              ],
            },
          ],
        },
        [],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: fn (x: Int) { x + 1 } matches snapshot: Expression: fn (x: Int) { x + 1 } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "body": {
          "block": [
            {
              "expression": {
                "infix": {
                  "left": {
                    "name": "x",
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "op": "+",
                  "right": {
                    "int": {
                      "size": 32,
                      "value": 1n,
                    },
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
                "position": [
                  1,
                  1,
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
        "name": null,
        "params": [
          {
            "guard": {
              "position": [
                1,
                1,
              ],
              "type": "Int",
            },
            "name": {
              "name": "x",
              "position": [
                1,
                1,
              ],
            },
          },
        ],
        "position": [
          1,
          1,
        ],
        "return_type": null,
        "type_params": [],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: fn (x, y) { x + y } matches snapshot: Expression: fn (x, y) { x + y } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "body": {
          "block": [
            {
              "expression": {
                "infix": {
                  "left": {
                    "name": "x",
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "op": "+",
                  "right": {
                    "name": "y",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
                "position": [
                  1,
                  1,
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
        "name": null,
        "params": [
          {
            "guard": null,
            "name": {
              "name": "x",
              "position": [
                1,
                1,
              ],
            },
          },
          {
            "guard": null,
            "name": {
              "name": "y",
              "position": [
                1,
                1,
              ],
            },
          },
        ],
        "position": [
          1,
          1,
        ],
        "return_type": null,
        "type_params": [],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: fn<t>(x: t): t { x } matches snapshot: Expression: fn<t>(x: t): t { x } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "body": {
          "block": [
            {
              "expression": {
                "name": "x",
                "position": [
                  1,
                  1,
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
        "name": null,
        "params": [
          {
            "guard": {
              "name": "t",
              "position": [
                1,
                1,
              ],
            },
            "name": {
              "name": "x",
              "position": [
                1,
                1,
              ],
            },
          },
        ],
        "position": [
          1,
          1,
        ],
        "return_type": {
          "name": "t",
          "position": [
            1,
            1,
          ],
        },
        "type_params": [
          {
            "name": "t",
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: map(fn (b) b, a) matches snapshot: Expression: map(fn (b) b, a) 1`] = `
[
  null,
  {
    "ok": {
      "call": [
        {
          "name": "map",
          "position": [
            1,
            1,
          ],
        },
        [
          {
            "fn": {
              "body": {
                "name": "b",
                "position": [
                  1,
                  1,
                ],
              },
              "name": null,
              "params": [
                {
                  "guard": null,
                  "name": {
                    "name": "b",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
              ],
              "position": [
                1,
                1,
              ],
              "return_type": null,
              "type_params": [],
            },
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "a",
            "position": [
              1,
              1,
            ],
          },
        ],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: !x matches snapshot: Expression: !x 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "prefix": {
        "op": "!",
        "operand": {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: -42 matches snapshot: Expression: -42 1`] = `
[
  null,
  {
    "ok": {
      "int": {
        "size": 32,
        "value": -42n,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: ~bits matches snapshot: Expression: ~bits 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "prefix": {
        "op": "~",
        "operand": {
          "name": "bits",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: .!x matches snapshot: Expression: .!x 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "prefix": {
        "op": ".!",
        "operand": {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: !.x matches snapshot: Expression: !.x 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "prefix": {
        "op": "!.",
        "operand": {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: .~y matches snapshot: Expression: .~y 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "prefix": {
        "op": ".~",
        "operand": {
          "name": "y",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: ~.y matches snapshot: Expression: ~.y 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "prefix": {
        "op": "~.",
        "operand": {
          "name": "y",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: .-z matches snapshot: Expression: .-z 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "prefix": {
        "op": ".-",
        "operand": {
          "name": "z",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: -.z matches snapshot: Expression: -.z 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "prefix": {
        "op": "-.",
        "operand": {
          "name": "z",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: x! matches snapshot: Expression: x! 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "postfix": {
        "op": "!",
        "operand": {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: x? matches snapshot: Expression: x? 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "postfix": {
        "op": "?",
        "operand": {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: x.! matches snapshot: Expression: x.! 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "postfix": {
        "op": ".!",
        "operand": {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: x!. matches snapshot: Expression: x!. 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "postfix": {
        "op": "!.",
        "operand": {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: x.? matches snapshot: Expression: x.? 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "postfix": {
        "op": ".?",
        "operand": {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: x?. matches snapshot: Expression: x?. 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "postfix": {
        "op": "?.",
        "operand": {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
      },
    },
  },
]
`;

exports[`Expression: a .+ b matches snapshot: Expression: a .+ b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".+",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a +. b matches snapshot: Expression: a +. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "+.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .* b matches snapshot: Expression: a .* b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".*",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a *. b matches snapshot: Expression: a *. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "*.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a ./ b matches snapshot: Expression: a ./ b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "./",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a /. b matches snapshot: Expression: a /. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "/.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .** b matches snapshot: Expression: a .** b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".**",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a **. b matches snapshot: Expression: a **. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "**.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .- b matches snapshot: Expression: a .- b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".-",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a -. b matches snapshot: Expression: a -. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "-.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .% b matches snapshot: Expression: a .% b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".%",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a %. b matches snapshot: Expression: a %. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "%.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a & b matches snapshot: Expression: a & b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "&",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a | b matches snapshot: Expression: a | b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "|",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a ^ b matches snapshot: Expression: a ^ b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "^",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a << b matches snapshot: Expression: a << b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "<<",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a >> b matches snapshot: Expression: a >> b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ">>",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .& b matches snapshot: Expression: a .& b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".&",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a &. b matches snapshot: Expression: a &. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "&.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .| b matches snapshot: Expression: a .| b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".|",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a |. b matches snapshot: Expression: a |. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "|.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .^ b matches snapshot: Expression: a .^ b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".^",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a ^. b matches snapshot: Expression: a ^. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "^.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .<< b matches snapshot: Expression: a .<< b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".<<",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a <<. b matches snapshot: Expression: a <<. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "<<.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .>> b matches snapshot: Expression: a .>> b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".>>",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a >>. b matches snapshot: Expression: a >>. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ">>.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a < b matches snapshot: Expression: a < b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "<",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a > b matches snapshot: Expression: a > b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ">",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a <= b matches snapshot: Expression: a <= b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "<=",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a >= b matches snapshot: Expression: a >= b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ">=",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a == b matches snapshot: Expression: a == b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "==",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a != b matches snapshot: Expression: a != b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "!=",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .< b matches snapshot: Expression: a .< b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".<",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a <. b matches snapshot: Expression: a <. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "<.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .> b matches snapshot: Expression: a .> b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".>",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a >. b matches snapshot: Expression: a >. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ">.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .<= b matches snapshot: Expression: a .<= b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".<=",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a <=. b matches snapshot: Expression: a <=. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "<=.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .>= b matches snapshot: Expression: a .>= b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".>=",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a >=. b matches snapshot: Expression: a >=. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ">=.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .== b matches snapshot: Expression: a .== b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".==",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a ==. b matches snapshot: Expression: a ==. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "==.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .!= b matches snapshot: Expression: a .!= b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".!=",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a !=. b matches snapshot: Expression: a !=. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "!=.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a && b matches snapshot: Expression: a && b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "&&",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a || b matches snapshot: Expression: a || b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "||",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a ^^ b matches snapshot: Expression: a ^^ b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "^^",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .&& b matches snapshot: Expression: a .&& b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".&&",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a &&. b matches snapshot: Expression: a &&. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "&&.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .|| b matches snapshot: Expression: a .|| b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".||",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a ||. b matches snapshot: Expression: a ||. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "||.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .^^ b matches snapshot: Expression: a .^^ b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".^^",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a ^^. b matches snapshot: Expression: a ^^. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "^^.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a ?? b matches snapshot: Expression: a ?? b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "??",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .?? b matches snapshot: Expression: a .?? b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".??",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a ??. b matches snapshot: Expression: a ??. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "??.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .. b matches snapshot: Expression: a .. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "..",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a |> b matches snapshot: Expression: a |> b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "|>",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a <> b matches snapshot: Expression: a <> b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "<>",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a .<> b matches snapshot: Expression: a .<> b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": ".<>",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a <>. b matches snapshot: Expression: a <>. b 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "<>.",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a + b * c ** d matches snapshot: Expression: a + b * c ** d 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "+",
        "right": {
          "infix": {
            "left": {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
            "op": "*",
            "right": {
              "infix": {
                "left": {
                  "name": "c",
                  "position": [
                    1,
                    1,
                  ],
                },
                "op": "**",
                "right": {
                  "name": "d",
                  "position": [
                    1,
                    1,
                  ],
                },
              },
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a || b && c matches snapshot: Expression: a || b && c 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "||",
        "right": {
          "infix": {
            "left": {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
            "op": "&&",
            "right": {
              "name": "c",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: !a && b || c matches snapshot: Expression: !a && b || c 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "infix": {
            "left": {
              "position": [
                1,
                1,
              ],
              "prefix": {
                "op": "!",
                "operand": {
                  "name": "a",
                  "position": [
                    1,
                    1,
                  ],
                },
              },
            },
            "op": "&&",
            "right": {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        "op": "||",
        "right": {
          "name": "c",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a + b < c * d matches snapshot: Expression: a + b < c * d 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "infix": {
            "left": {
              "name": "a",
              "position": [
                1,
                1,
              ],
            },
            "op": "+",
            "right": {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        "op": "<",
        "right": {
          "infix": {
            "left": {
              "name": "c",
              "position": [
                1,
                1,
              ],
            },
            "op": "*",
            "right": {
              "name": "d",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a |> b |> c matches snapshot: Expression: a |> b |> c 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "infix": {
            "left": {
              "name": "a",
              "position": [
                1,
                1,
              ],
            },
            "op": "|>",
            "right": {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        "op": "|>",
        "right": {
          "name": "c",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: a ?? b ?? c matches snapshot: Expression: a ?? b ?? c 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "??",
        "right": {
          "infix": {
            "left": {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
            "op": "??",
            "right": {
              "name": "c",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: obj.foo().bar().baz matches snapshot: Expression: obj.foo().bar().baz 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "select": [
        {
          "call": [
            {
              "position": [
                1,
                1,
              ],
              "select": [
                {
                  "call": [
                    {
                      "position": [
                        1,
                        1,
                      ],
                      "select": [
                        {
                          "name": "obj",
                          "position": [
                            1,
                            1,
                          ],
                        },
                        {
                          "name": "foo",
                          "position": [
                            1,
                            1,
                          ],
                        },
                      ],
                    },
                    [],
                  ],
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "name": "bar",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
            [],
          ],
          "position": [
            1,
            1,
          ],
        },
        {
          "name": "baz",
          "position": [
            1,
            1,
          ],
        },
      ],
    },
  },
]
`;

exports[`Expression: list.map(fn(x) { x + 1 }).filter(fn(x) { x > 0 }) matches snapshot: Expression: list.map(fn(x) { x + 1 }).filter(fn(x) { x > 0 }) 1`] = `
[
  null,
  {
    "ok": {
      "call": [
        {
          "position": [
            1,
            1,
          ],
          "select": [
            {
              "call": [
                {
                  "position": [
                    1,
                    1,
                  ],
                  "select": [
                    {
                      "name": "list",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    {
                      "name": "map",
                      "position": [
                        1,
                        1,
                      ],
                    },
                  ],
                },
                [
                  {
                    "fn": {
                      "body": {
                        "block": [
                          {
                            "expression": {
                              "infix": {
                                "left": {
                                  "name": "x",
                                  "position": [
                                    1,
                                    1,
                                  ],
                                },
                                "op": "+",
                                "right": {
                                  "int": {
                                    "size": 32,
                                    "value": 1n,
                                  },
                                  "position": [
                                    1,
                                    1,
                                  ],
                                },
                              },
                              "position": [
                                1,
                                1,
                              ],
                            },
                            "position": [
                              1,
                              1,
                            ],
                          },
                        ],
                        "position": [
                          1,
                          1,
                        ],
                      },
                      "name": null,
                      "params": [
                        {
                          "guard": null,
                          "name": {
                            "name": "x",
                            "position": [
                              1,
                              1,
                            ],
                          },
                        },
                      ],
                      "position": [
                        1,
                        1,
                      ],
                      "return_type": null,
                      "type_params": [],
                    },
                    "position": [
                      1,
                      1,
                    ],
                  },
                ],
              ],
              "position": [
                1,
                1,
              ],
            },
            {
              "name": "filter",
              "position": [
                1,
                1,
              ],
            },
          ],
        },
        [
          {
            "fn": {
              "body": {
                "block": [
                  {
                    "expression": {
                      "infix": {
                        "left": {
                          "name": "x",
                          "position": [
                            1,
                            1,
                          ],
                        },
                        "op": ">",
                        "right": {
                          "int": {
                            "size": 32,
                            "value": 0n,
                          },
                          "position": [
                            1,
                            1,
                          ],
                        },
                      },
                      "position": [
                        1,
                        1,
                      ],
                    },
                    "position": [
                      1,
                      1,
                    ],
                  },
                ],
                "position": [
                  1,
                  1,
                ],
              },
              "name": null,
              "params": [
                {
                  "guard": null,
                  "name": {
                    "name": "x",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
              ],
              "position": [
                1,
                1,
              ],
              "return_type": null,
              "type_params": [],
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: fn(x) { match x { Some(y) => y, None => 0 } } matches snapshot: Expression: fn(x) { match x { Some(y) => y, None => 0 } } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "body": {
          "block": [
            {
              "expression": {
                "match": [
                  {
                    "name": "x",
                    "position": [
                      1,
                      1,
                    ],
                  },
                  [
                    {
                      "body": {
                        "name": "y",
                        "position": [
                          1,
                          1,
                        ],
                      },
                      "guard": null,
                      "pattern": {
                        "constr": {
                          "patterns": [
                            {
                              "name": "y",
                              "position": [
                                1,
                                1,
                              ],
                            },
                          ],
                          "type": {
                            "position": [
                              1,
                              1,
                            ],
                            "type": "Some",
                          },
                        },
                        "position": [
                          1,
                          1,
                        ],
                      },
                    },
                    {
                      "body": {
                        "int": {
                          "size": 32,
                          "value": 0n,
                        },
                        "position": [
                          1,
                          1,
                        ],
                      },
                      "guard": null,
                      "pattern": {
                        "constr": {
                          "patterns": [],
                          "type": {
                            "position": [
                              1,
                              1,
                            ],
                            "type": "None",
                          },
                        },
                        "position": [
                          1,
                          1,
                        ],
                      },
                    },
                  ],
                ],
                "position": [
                  1,
                  1,
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
        "name": null,
        "params": [
          {
            "guard": null,
            "name": {
              "name": "x",
              "position": [
                1,
                1,
              ],
            },
          },
        ],
        "position": [
          1,
          1,
        ],
        "return_type": null,
        "type_params": [],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: if a { #{x: 1} } else { #{x: 2} } matches snapshot: Expression: if a { #{x: 1} } else { #{x: 2} } 1`] = `
[
  null,
  {
    "ok": {
      "if_expr": {
        "cond": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "else_body": {
          "block": [
            {
              "expression": {
                "position": [
                  1,
                  1,
                ],
                "record": [
                  [
                    {
                      "name": "x",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    {
                      "int": {
                        "size": 32,
                        "value": 2n,
                      },
                      "position": [
                        1,
                        1,
                      ],
                    },
                  ],
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
        "if_body": {
          "block": [
            {
              "expression": {
                "position": [
                  1,
                  1,
                ],
                "record": [
                  [
                    {
                      "name": "x",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    {
                      "int": {
                        "size": 32,
                        "value": 1n,
                      },
                      "position": [
                        1,
                        1,
                      ],
                    },
                  ],
                ],
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: { let x = 1; let y = 2; x + y } matches snapshot: Expression: { let x = 1; let y = 2; x + y } 1`] = `
[
  null,
  {
    "ok": {
      "block": [
        {
          "let_bind": {
            "assert": false,
            "expression": {
              "int": {
                "size": 32,
                "value": 1n,
              },
              "position": [
                1,
                1,
              ],
            },
            "pattern": {
              "name": "x",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "let_bind": {
            "assert": false,
            "expression": {
              "int": {
                "size": 32,
                "value": 2n,
              },
              "position": [
                1,
                1,
              ],
            },
            "pattern": {
              "name": "y",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "expression": {
            "infix": {
              "left": {
                "name": "x",
                "position": [
                  1,
                  1,
                ],
              },
              "op": "+",
              "right": {
                "name": "y",
                "position": [
                  1,
                  1,
                ],
              },
            },
            "position": [
              1,
              1,
            ],
          },
          "position": [
            1,
            1,
          ],
        },
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: inf matches snapshot: Expression: inf 1`] = `
[
  null,
  {
    "ok": {
      "float": {
        "size": 64,
        "value": Infinity,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: nan matches snapshot: Expression: nan 1`] = `
[
  null,
  {
    "ok": {
      "float": {
        "size": 64,
        "value": NaN,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: inf + 1 matches snapshot: Expression: inf + 1 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "float": {
            "size": 64,
            "value": Infinity,
          },
          "position": [
            1,
            1,
          ],
        },
        "op": "+",
        "right": {
          "int": {
            "size": 32,
            "value": 1n,
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Expression: nan * 2 matches snapshot: Expression: nan * 2 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "float": {
            "size": 64,
            "value": NaN,
          },
          "position": [
            1,
            1,
          ],
        },
        "op": "*",
        "right": {
          "int": {
            "size": 32,
            "value": 2n,
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Pattern: Some(Pair(x, y)) matches snapshot: PatternExpression: Some(Pair(x, y)) 1`] = `
[
  null,
  {
    "ok": {
      "constr": {
        "patterns": [
          {
            "constr": {
              "patterns": [
                {
                  "name": "x",
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "name": "y",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
              "type": {
                "position": [
                  1,
                  1,
                ],
                "type": "Pair",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
        "type": {
          "position": [
            1,
            1,
          ],
          "type": "Some",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Pattern: Result(Ok(value)) matches snapshot: PatternExpression: Result(Ok(value)) 1`] = `
[
  null,
  {
    "ok": {
      "constr": {
        "patterns": [
          {
            "constr": {
              "patterns": [
                {
                  "name": "value",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
              "type": {
                "position": [
                  1,
                  1,
                ],
                "type": "Ok",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
        "type": {
          "position": [
            1,
            1,
          ],
          "type": "Result",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Pattern: #{} matches snapshot: PatternExpression: #{} 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "record": [],
    },
  },
]
`;

exports[`Pattern: #{x, y, z} matches snapshot: PatternExpression: #{x, y, z} 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "record": [
        [
          {
            "name": "x",
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "x",
            "position": [
              1,
              1,
            ],
          },
        ],
        [
          {
            "name": "y",
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "y",
            "position": [
              1,
              1,
            ],
          },
        ],
        [
          {
            "name": "z",
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "z",
            "position": [
              1,
              1,
            ],
          },
        ],
      ],
    },
  },
]
`;

exports[`Pattern: #{point: #(x, y)} matches snapshot: PatternExpression: #{point: #(x, y)} 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "record": [
        [
          {
            "name": "point",
            "position": [
              1,
              1,
            ],
          },
          {
            "position": [
              1,
              1,
            ],
            "tuple": [
              {
                "name": "x",
                "position": [
                  1,
                  1,
                ],
              },
              {
                "name": "y",
                "position": [
                  1,
                  1,
                ],
              },
            ],
          },
        ],
      ],
    },
  },
]
`;

exports[`Pattern: Wrapper(#{inner: value}) matches snapshot: PatternExpression: Wrapper(#{inner: value}) 1`] = `
[
  null,
  {
    "ok": {
      "constr": {
        "patterns": [
          {
            "position": [
              1,
              1,
            ],
            "record": [
              [
                {
                  "name": "inner",
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "name": "value",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            ],
          },
        ],
        "type": {
          "position": [
            1,
            1,
          ],
          "type": "Wrapper",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Pattern: Nested(#(1, #{x: y})) matches snapshot: PatternExpression: Nested(#(1, #{x: y})) 1`] = `
[
  null,
  {
    "ok": {
      "constr": {
        "patterns": [
          {
            "position": [
              1,
              1,
            ],
            "tuple": [
              {
                "int": {
                  "size": 32,
                  "value": 1n,
                },
                "position": [
                  1,
                  1,
                ],
              },
              {
                "position": [
                  1,
                  1,
                ],
                "record": [
                  [
                    {
                      "name": "x",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    {
                      "name": "y",
                      "position": [
                        1,
                        1,
                      ],
                    },
                  ],
                ],
              },
            ],
          },
        ],
        "type": {
          "position": [
            1,
            1,
          ],
          "type": "Nested",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Type: #() matches snapshot: TypeExpression: #() 1`] = `
{
  "ok": {
    "position": [
      1,
      1,
    ],
    "tuple": [],
  },
}
`;

exports[`Type: #{} matches snapshot: TypeExpression: #{} 1`] = `
{
  "ok": {
    "position": [
      1,
      1,
    ],
    "record": [],
  },
}
`;

exports[`Type: () => Void matches snapshot: TypeExpression: () => Void 1`] = `
{
  "ok": {
    "fn": {
      "args": [],
      "ret": {
        "position": [
          1,
          1,
        ],
        "type": "Void",
      },
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Type: A.B.C.D matches snapshot: TypeExpression: A.B.C.D 1`] = `
{
  "ok": {
    "position": [
      1,
      1,
    ],
    "select": {
      "name": {
        "position": [
          1,
          1,
        ],
        "type": "D",
      },
      "root": {
        "position": [
          1,
          1,
        ],
        "select": {
          "name": {
            "position": [
              1,
              1,
            ],
            "type": "C",
          },
          "root": {
            "position": [
              1,
              1,
            ],
            "select": {
              "name": {
                "position": [
                  1,
                  1,
                ],
                "type": "B",
              },
              "root": {
                "position": [
                  1,
                  1,
                ],
                "type": "A",
              },
            },
          },
        },
      },
    },
  },
}
`;

exports[`Type: Container<Inner<T>>.Value matches snapshot: TypeExpression: Container<Inner<T>>.Value 1`] = `
{
  "ok": {
    "position": [
      1,
      1,
    ],
    "select": {
      "name": {
        "position": [
          1,
          1,
        ],
        "type": "Value",
      },
      "root": {
        "app": {
          "args": [
            {
              "app": {
                "args": [
                  {
                    "position": [
                      1,
                      1,
                    ],
                    "type": "T",
                  },
                ],
                "callee": {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "Inner",
                },
              },
              "position": [
                1,
                1,
              ],
            },
          ],
          "callee": {
            "position": [
              1,
              1,
            ],
            "type": "Container",
          },
        },
        "position": [
          1,
          1,
        ],
      },
    },
  },
}
`;

exports[`Type: Map<K, V> matches snapshot: TypeExpression: Map<K, V> 1`] = `
{
  "ok": {
    "app": {
      "args": [
        {
          "position": [
            1,
            1,
          ],
          "type": "K",
        },
        {
          "position": [
            1,
            1,
          ],
          "type": "V",
        },
      ],
      "callee": {
        "position": [
          1,
          1,
        ],
        "type": "Map",
      },
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Type: Triple<A, B, C> matches snapshot: TypeExpression: Triple<A, B, C> 1`] = `
{
  "ok": {
    "app": {
      "args": [
        {
          "position": [
            1,
            1,
          ],
          "type": "A",
        },
        {
          "position": [
            1,
            1,
          ],
          "type": "B",
        },
        {
          "position": [
            1,
            1,
          ],
          "type": "C",
        },
      ],
      "callee": {
        "position": [
          1,
          1,
        ],
        "type": "Triple",
      },
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Type: Fn<#(A, B), C> matches snapshot: TypeExpression: Fn<#(A, B), C> 1`] = `
{
  "ok": {
    "app": {
      "args": [
        {
          "position": [
            1,
            1,
          ],
          "tuple": [
            {
              "position": [
                1,
                1,
              ],
              "type": "A",
            },
            {
              "position": [
                1,
                1,
              ],
              "type": "B",
            },
          ],
        },
        {
          "position": [
            1,
            1,
          ],
          "type": "C",
        },
      ],
      "callee": {
        "position": [
          1,
          1,
        ],
        "type": "Fn",
      },
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Type: ((Int) => Int) => Int matches snapshot: TypeExpression: ((Int) => Int) => Int 1`] = `
{
  "ok": {
    "fn": {
      "args": [
        {
          "fn": {
            "args": [
              {
                "position": [
                  1,
                  1,
                ],
                "type": "Int",
              },
            ],
            "ret": {
              "position": [
                1,
                1,
              ],
              "type": "Int",
            },
          },
          "position": [
            1,
            1,
          ],
        },
      ],
      "ret": {
        "position": [
          1,
          1,
        ],
        "type": "Int",
      },
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Type: (Int, (String) => Bool) => Result matches snapshot: TypeExpression: (Int, (String) => Bool) => Result 1`] = `
{
  "ok": {
    "fn": {
      "args": [
        {
          "position": [
            1,
            1,
          ],
          "type": "Int",
        },
        {
          "fn": {
            "args": [
              {
                "position": [
                  1,
                  1,
                ],
                "type": "String",
              },
            ],
            "ret": {
              "position": [
                1,
                1,
              ],
              "type": "Bool",
            },
          },
          "position": [
            1,
            1,
          ],
        },
      ],
      "ret": {
        "position": [
          1,
          1,
        ],
        "type": "Result",
      },
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Type: #{pos: #(f64, f64), vel: #(f64, f64)} matches snapshot: TypeExpression: #{pos: #(f64, f64), vel: #(f64, f64)} 1`] = `
{
  "ok": {
    "position": [
      1,
      1,
    ],
    "record": [
      {
        "name": {
          "name": "pos",
          "position": [
            1,
            1,
          ],
        },
        "ty": {
          "position": [
            1,
            1,
          ],
          "tuple": [
            {
              "name": "f64",
              "position": [
                1,
                1,
              ],
            },
            {
              "name": "f64",
              "position": [
                1,
                1,
              ],
            },
          ],
        },
      },
      {
        "name": {
          "name": "vel",
          "position": [
            1,
            1,
          ],
        },
        "ty": {
          "position": [
            1,
            1,
          ],
          "tuple": [
            {
              "name": "f64",
              "position": [
                1,
                1,
              ],
            },
            {
              "name": "f64",
              "position": [
                1,
                1,
              ],
            },
          ],
        },
      },
    ],
  },
}
`;

exports[`Body: let #(x, y) = point matches snapshot: BodyExpression: let #(x, y) = point 1`] = `
{
  "ok": {
    "let_bind": {
      "assert": false,
      "expression": {
        "name": "point",
        "position": [
          1,
          1,
        ],
      },
      "pattern": {
        "position": [
          1,
          1,
        ],
        "tuple": [
          {
            "name": "x",
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "y",
            "position": [
              1,
              1,
            ],
          },
        ],
      },
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Body: let #{name, age} = person matches snapshot: BodyExpression: let #{name, age} = person 1`] = `
{
  "ok": {
    "let_bind": {
      "assert": false,
      "expression": {
        "name": "person",
        "position": [
          1,
          1,
        ],
      },
      "pattern": {
        "position": [
          1,
          1,
        ],
        "record": [
          [
            {
              "name": "name",
              "position": [
                1,
                1,
              ],
            },
            {
              "name": "name",
              "position": [
                1,
                1,
              ],
            },
          ],
          [
            {
              "name": "age",
              "position": [
                1,
                1,
              ],
            },
            {
              "name": "age",
              "position": [
                1,
                1,
              ],
            },
          ],
        ],
      },
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Body: let Some(value) = option matches snapshot: BodyExpression: let Some(value) = option 1`] = `
{
  "ok": {
    "let_bind": {
      "assert": false,
      "expression": {
        "name": "option",
        "position": [
          1,
          1,
        ],
      },
      "pattern": {
        "constr": {
          "patterns": [
            {
              "name": "value",
              "position": [
                1,
                1,
              ],
            },
          ],
          "type": {
            "position": [
              1,
              1,
            ],
            "type": "Some",
          },
        },
        "position": [
          1,
          1,
        ],
      },
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Body: { { a; b }; c } matches snapshot: BodyExpression: { { a; b }; c } 1`] = `
{
  "ok": {
    "expression": {
      "block": [
        {
          "expression": {
            "block": [
              {
                "expression": {
                  "name": "a",
                  "position": [
                    1,
                    1,
                  ],
                },
                "position": [
                  1,
                  1,
                ],
              },
              {
                "expression": {
                  "name": "b",
                  "position": [
                    1,
                    1,
                  ],
                },
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "position": [
              1,
              1,
            ],
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "expression": {
            "name": "c",
            "position": [
              1,
              1,
            ],
          },
          "position": [
            1,
            1,
          ],
        },
      ],
      "position": [
        1,
        1,
      ],
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Body: { let x = 1; y <- compute(); x + y } matches snapshot: BodyExpression: { let x = 1; y <- compute(); x + y } 1`] = `
{
  "ok": {
    "expression": {
      "block": [
        {
          "let_bind": {
            "assert": false,
            "expression": {
              "int": {
                "size": 32,
                "value": 1n,
              },
              "position": [
                1,
                1,
              ],
            },
            "pattern": {
              "name": "x",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "arrow_bind": {
            "expression": {
              "call": [
                {
                  "name": "compute",
                  "position": [
                    1,
                    1,
                  ],
                },
                [],
              ],
              "position": [
                1,
                1,
              ],
            },
            "name": {
              "name": "y",
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
        {
          "expression": {
            "infix": {
              "left": {
                "name": "x",
                "position": [
                  1,
                  1,
                ],
              },
              "op": "+",
              "right": {
                "name": "y",
                "position": [
                  1,
                  1,
                ],
              },
            },
            "position": [
              1,
              1,
            ],
          },
          "position": [
            1,
            1,
          ],
        },
      ],
      "position": [
        1,
        1,
      ],
    },
    "position": [
      1,
      1,
    ],
  },
}
`;

exports[`Declaration: impl Show for Int { fn show(): String { "int" } } matches snapshot: Declaration: impl Show for Int { fn show(): String { "int" } } 1`] = `
[
  null,
  {
    "ok": {
      "impl": {
        "fns": [
          {
            "body": {
              "block": [
                {
                  "expression": {
                    "position": [
                      1,
                      1,
                    ],
                    "string": "int",
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
              "position": [
                1,
                1,
              ],
            },
            "name": {
              "name": "show",
              "position": [
                1,
                1,
              ],
            },
            "params": [],
            "position": [
              1,
              1,
            ],
            "return_type": {
              "position": [
                1,
                1,
              ],
              "type": "String",
            },
            "type_params": [],
          },
        ],
        "for": {
          "position": [
            1,
            1,
          ],
          "type": "Int",
        },
        "name": {
          "position": [
            1,
            1,
          ],
          "type": "Show",
        },
        "type_params": [],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: impl<t> Eq for Option<t> { fn eq(other: Option<t>): Bool { true } } matches snapshot: Declaration: impl<t> Eq for Option<t> { fn eq(other: Option<t>): Bool { true } } 1`] = `
[
  null,
  {
    "ok": {
      "impl": {
        "fns": [
          {
            "body": {
              "block": [
                {
                  "expression": {
                    "bool": true,
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
              "position": [
                1,
                1,
              ],
            },
            "name": {
              "name": "eq",
              "position": [
                1,
                1,
              ],
            },
            "params": [
              {
                "guard": {
                  "app": {
                    "args": [
                      {
                        "name": "t",
                        "position": [
                          1,
                          1,
                        ],
                      },
                    ],
                    "callee": {
                      "position": [
                        1,
                        1,
                      ],
                      "type": "Option",
                    },
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
                "name": {
                  "name": "other",
                  "position": [
                    1,
                    1,
                  ],
                },
              },
            ],
            "position": [
              1,
              1,
            ],
            "return_type": {
              "position": [
                1,
                1,
              ],
              "type": "Bool",
            },
            "type_params": [],
          },
        ],
        "for": {
          "app": {
            "args": [
              {
                "name": "t",
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "callee": {
              "position": [
                1,
                1,
              ],
              "type": "Option",
            },
          },
          "position": [
            1,
            1,
          ],
        },
        "name": {
          "position": [
            1,
            1,
          ],
          "type": "Eq",
        },
        "type_params": [],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: impl<t> Default for Vec<t> { fn default(): Vec<t> { Vec() } } matches snapshot: Declaration: impl<t> Default for Vec<t> { fn default(): Vec<t> { Vec() } } 1`] = `
[
  null,
  {
    "ok": {
      "impl": {
        "fns": [
          {
            "body": {
              "block": [
                {
                  "expression": {
                    "call": [
                      {
                        "position": [
                          1,
                          1,
                        ],
                        "type": "Vec",
                      },
                      [],
                    ],
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
              "position": [
                1,
                1,
              ],
            },
            "name": {
              "name": "default",
              "position": [
                1,
                1,
              ],
            },
            "params": [],
            "position": [
              1,
              1,
            ],
            "return_type": {
              "app": {
                "args": [
                  {
                    "name": "t",
                    "position": [
                      1,
                      1,
                    ],
                  },
                ],
                "callee": {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "Vec",
                },
              },
              "position": [
                1,
                1,
              ],
            },
            "type_params": [],
          },
        ],
        "for": {
          "app": {
            "args": [
              {
                "name": "t",
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "callee": {
              "position": [
                1,
                1,
              ],
              "type": "Vec",
            },
          },
          "position": [
            1,
            1,
          ],
        },
        "name": {
          "position": [
            1,
            1,
          ],
          "type": "Default",
        },
        "type_params": [],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: impl <t_err, t_ok> Map<t_ok> for Result<t_err, t_ok> {
    fn map<t_to>(cb: (t_ok) => t_to): Result<t_err, t_to> {
      match self {
        Ok(t) => Ok(cb(t)),
        Err(t) => Err(t)
      }
    }
  } matches snapshot: Declaration: impl <t_err, t_ok> Map<t_ok> for Result<t_err, t_ok> {
    fn map<t_to>(cb: (t_ok) => t_to): Result<t_err, t_to> {
      match self {
        Ok(t) => Ok(cb(t)),
        Err(t) => Err(t)
      }
    }
  } 1`] = `
[
  null,
  {
    "ok": {
      "impl": {
        "fns": [
          {
            "body": {
              "block": [
                {
                  "expression": {
                    "match": [
                      {
                        "position": [
                          3,
                          2,
                        ],
                        "self": null,
                      },
                      [
                        {
                          "body": {
                            "call": [
                              {
                                "position": [
                                  4,
                                  1,
                                ],
                                "type": "Ok",
                              },
                              [
                                {
                                  "call": [
                                    {
                                      "name": "cb",
                                      "position": [
                                        4,
                                        1,
                                      ],
                                    },
                                    [
                                      {
                                        "name": "t",
                                        "position": [
                                          4,
                                          1,
                                        ],
                                      },
                                    ],
                                  ],
                                  "position": [
                                    4,
                                    1,
                                  ],
                                },
                              ],
                            ],
                            "position": [
                              4,
                              1,
                            ],
                          },
                          "guard": null,
                          "pattern": {
                            "constr": {
                              "patterns": [
                                {
                                  "name": "t",
                                  "position": [
                                    4,
                                    1,
                                  ],
                                },
                              ],
                              "type": {
                                "position": [
                                  4,
                                  2,
                                ],
                                "type": "Ok",
                              },
                            },
                            "position": [
                              4,
                              2,
                            ],
                          },
                        },
                        {
                          "body": {
                            "call": [
                              {
                                "position": [
                                  5,
                                  1,
                                ],
                                "type": "Err",
                              },
                              [
                                {
                                  "name": "t",
                                  "position": [
                                    5,
                                    1,
                                  ],
                                },
                              ],
                            ],
                            "position": [
                              5,
                              1,
                            ],
                          },
                          "guard": null,
                          "pattern": {
                            "constr": {
                              "patterns": [
                                {
                                  "name": "t",
                                  "position": [
                                    5,
                                    1,
                                  ],
                                },
                              ],
                              "type": {
                                "position": [
                                  5,
                                  2,
                                ],
                                "type": "Err",
                              },
                            },
                            "position": [
                              5,
                              2,
                            ],
                          },
                        },
                      ],
                    ],
                    "position": [
                      3,
                      2,
                    ],
                  },
                  "position": [
                    3,
                    2,
                  ],
                },
              ],
              "position": [
                2,
                1,
              ],
            },
            "name": {
              "name": "map",
              "position": [
                2,
                2,
              ],
            },
            "params": [
              {
                "guard": {
                  "fn": {
                    "args": [
                      {
                        "name": "t_ok",
                        "position": [
                          2,
                          1,
                        ],
                      },
                    ],
                    "ret": {
                      "name": "t_to",
                      "position": [
                        2,
                        1,
                      ],
                    },
                  },
                  "position": [
                    2,
                    1,
                  ],
                },
                "name": {
                  "name": "cb",
                  "position": [
                    2,
                    1,
                  ],
                },
              },
            ],
            "position": [
              2,
              2,
            ],
            "return_type": {
              "app": {
                "args": [
                  {
                    "name": "t_err",
                    "position": [
                      2,
                      1,
                    ],
                  },
                  {
                    "name": "t_to",
                    "position": [
                      2,
                      1,
                    ],
                  },
                ],
                "callee": {
                  "position": [
                    2,
                    1,
                  ],
                  "type": "Result",
                },
              },
              "position": [
                2,
                1,
              ],
            },
            "type_params": [
              {
                "name": "t_to",
                "position": [
                  2,
                  1,
                ],
              },
            ],
          },
        ],
        "for": {
          "app": {
            "args": [
              {
                "name": "t_err",
                "position": [
                  1,
                  1,
                ],
              },
              {
                "name": "t_ok",
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "callee": {
              "position": [
                1,
                1,
              ],
              "type": "Result",
            },
          },
          "position": [
            1,
            1,
          ],
        },
        "name": {
          "position": [
            1,
            1,
          ],
          "type": "Map",
        },
        "type_params": [
          {
            "name": "t_ok",
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: fn compose<a, b, c>(f: (b) => c, g: (a) => b): (a) => c { fn(x: a): c { f(g(x)) } } matches snapshot: Declaration: fn compose<a, b, c>(f: (b) => c, g: (a) => b): (a) => c { fn(x: a): c { f(g(x)) } } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "fn": {
                    "body": {
                      "block": [
                        {
                          "expression": {
                            "call": [
                              {
                                "name": "f",
                                "position": [
                                  1,
                                  1,
                                ],
                              },
                              [
                                {
                                  "call": [
                                    {
                                      "name": "g",
                                      "position": [
                                        1,
                                        1,
                                      ],
                                    },
                                    [
                                      {
                                        "name": "x",
                                        "position": [
                                          1,
                                          1,
                                        ],
                                      },
                                    ],
                                  ],
                                  "position": [
                                    1,
                                    1,
                                  ],
                                },
                              ],
                            ],
                            "position": [
                              1,
                              1,
                            ],
                          },
                          "position": [
                            1,
                            1,
                          ],
                        },
                      ],
                      "position": [
                        1,
                        1,
                      ],
                    },
                    "name": null,
                    "params": [
                      {
                        "guard": {
                          "name": "a",
                          "position": [
                            1,
                            1,
                          ],
                        },
                        "name": {
                          "name": "x",
                          "position": [
                            1,
                            1,
                          ],
                        },
                      },
                    ],
                    "position": [
                      1,
                      1,
                    ],
                    "return_type": {
                      "name": "c",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    "type_params": [],
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "position": [
              1,
              1,
            ],
          },
          "name": {
            "name": "compose",
            "position": [
              1,
              1,
            ],
          },
          "params": [
            {
              "guard": {
                "fn": {
                  "args": [
                    {
                      "name": "b",
                      "position": [
                        1,
                        1,
                      ],
                    },
                  ],
                  "ret": {
                    "name": "c",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "name": "f",
                "position": [
                  1,
                  1,
                ],
              },
            },
            {
              "guard": {
                "fn": {
                  "args": [
                    {
                      "name": "a",
                      "position": [
                        1,
                        1,
                      ],
                    },
                  ],
                  "ret": {
                    "name": "b",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "name": "g",
                "position": [
                  1,
                  1,
                ],
              },
            },
          ],
          "position": [
            1,
            1,
          ],
          "return_type": {
            "fn": {
              "args": [
                {
                  "name": "a",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
              "ret": {
                "name": "c",
                "position": [
                  1,
                  1,
                ],
              },
            },
            "position": [
              1,
              1,
            ],
          },
          "type_params": [
            {
              "name": "a",
              "position": [
                1,
                1,
              ],
            },
            {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
            {
              "name": "c",
              "position": [
                1,
                1,
              ],
            },
          ],
        },
        "pub": false,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: pub fn fold<t, acc>(list: List<t>, init: acc, f: (acc, t) => acc): acc { init } matches snapshot: Declaration: pub fn fold<t, acc>(list: List<t>, init: acc, f: (acc, t) => acc): acc { init } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "name": "init",
                  "position": [
                    1,
                    1,
                  ],
                },
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "position": [
              1,
              1,
            ],
          },
          "name": {
            "name": "fold",
            "position": [
              1,
              1,
            ],
          },
          "params": [
            {
              "guard": {
                "app": {
                  "args": [
                    {
                      "name": "t",
                      "position": [
                        1,
                        1,
                      ],
                    },
                  ],
                  "callee": {
                    "position": [
                      1,
                      1,
                    ],
                    "type": "List",
                  },
                },
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "name": "list",
                "position": [
                  1,
                  1,
                ],
              },
            },
            {
              "guard": {
                "name": "acc",
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "name": "init",
                "position": [
                  1,
                  1,
                ],
              },
            },
            {
              "guard": {
                "fn": {
                  "args": [
                    {
                      "name": "acc",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    {
                      "name": "t",
                      "position": [
                        1,
                        1,
                      ],
                    },
                  ],
                  "ret": {
                    "name": "acc",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "name": "f",
                "position": [
                  1,
                  1,
                ],
              },
            },
          ],
          "position": [
            1,
            1,
          ],
          "return_type": {
            "name": "acc",
            "position": [
              1,
              1,
            ],
          },
          "type_params": [
            {
              "name": "t",
              "position": [
                1,
                1,
              ],
            },
            {
              "name": "acc",
              "position": [
                1,
                1,
              ],
            },
          ],
        },
        "pub": true,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: enum Result<t, e> { Ok(t), Err(e) } matches snapshot: Declaration: enum Result<t, e> { Ok(t), Err(e) } 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "Result",
        },
        "pub": false,
        "recursive": false,
        "type_params": [
          {
            "name": "t",
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "e",
            "position": [
              1,
              1,
            ],
          },
        ],
        "variants": [
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Ok",
              },
              "values": [
                {
                  "name": "t",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
          },
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Err",
              },
              "values": [
                {
                  "name": "e",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: pub type Map<k, v> = #{entries: List<#(k, v)>} matches snapshot: Declaration: pub type Map<k, v> = #{entries: List<#(k, v)>} 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "type_dec": {
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "Map",
        },
        "params": [
          {
            "name": "k",
            "position": [
              1,
              1,
            ],
          },
          {
            "name": "v",
            "position": [
              1,
              1,
            ],
          },
        ],
        "pub": true,
        "value": {
          "position": [
            1,
            1,
          ],
          "record": [
            {
              "name": {
                "name": "entries",
                "position": [
                  1,
                  1,
                ],
              },
              "ty": {
                "app": {
                  "args": [
                    {
                      "position": [
                        1,
                        1,
                      ],
                      "tuple": [
                        {
                          "name": "k",
                          "position": [
                            1,
                            1,
                          ],
                        },
                        {
                          "name": "v",
                          "position": [
                            1,
                            1,
                          ],
                        },
                      ],
                    },
                  ],
                  "callee": {
                    "position": [
                      1,
                      1,
                    ],
                    "type": "List",
                  },
                },
                "position": [
                  1,
                  1,
                ],
              },
            },
          ],
        },
      },
    },
  },
]
`;

exports[`Declaration: enum rec List<t_item> { Nil, Cons(t_item, List<t_item>) } matches snapshot: Declaration: enum rec List<t_item> { Nil, Cons(t_item, List<t_item>) } 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "List",
        },
        "pub": false,
        "recursive": true,
        "type_params": [
          {
            "name": "t_item",
            "position": [
              1,
              1,
            ],
          },
        ],
        "variants": [
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Nil",
              },
              "values": [],
            },
          },
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Cons",
              },
              "values": [
                {
                  "name": "t_item",
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "app": {
                    "args": [
                      {
                        "name": "t_item",
                        "position": [
                          1,
                          1,
                        ],
                      },
                    ],
                    "callee": {
                      "position": [
                        1,
                        1,
                      ],
                      "type": "List",
                    },
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: enum Tree<t> { Leaf, Node { value: t, left: Tree<t>, right: Tree<t> } } matches snapshot: Declaration: enum Tree<t> { Leaf, Node { value: t, left: Tree<t>, right: Tree<t> } } 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "Tree",
        },
        "pub": false,
        "recursive": false,
        "type_params": [
          {
            "name": "t",
            "position": [
              1,
              1,
            ],
          },
        ],
        "variants": [
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Leaf",
              },
              "values": [],
            },
          },
          {
            "fields": {
              "fields": [
                {
                  "name": {
                    "name": "value",
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "ty": {
                    "name": "t",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
                {
                  "name": {
                    "name": "left",
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "ty": {
                    "app": {
                      "args": [
                        {
                          "name": "t",
                          "position": [
                            1,
                            1,
                          ],
                        },
                      ],
                      "callee": {
                        "position": [
                          1,
                          1,
                        ],
                        "type": "Tree",
                      },
                    },
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
                {
                  "name": {
                    "name": "right",
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "ty": {
                    "app": {
                      "args": [
                        {
                          "name": "t",
                          "position": [
                            1,
                            1,
                          ],
                        },
                      ],
                      "callee": {
                        "position": [
                          1,
                          1,
                        ],
                        "type": "Tree",
                      },
                    },
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
              ],
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Node",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: pub enum Message { Quit, Move { x: i32, y: i32 }, Write(String), ChangeColor(i32, i32, i32) } matches snapshot: Declaration: pub enum Message { Quit, Move { x: i32, y: i32 }, Write(String), ChangeColor(i32, i32, i32) } 1`] = `
[
  null,
  {
    "ok": {
      "enum": {
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "Message",
        },
        "pub": true,
        "recursive": false,
        "type_params": [],
        "variants": [
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Quit",
              },
              "values": [],
            },
          },
          {
            "fields": {
              "fields": [
                {
                  "name": {
                    "name": "x",
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "ty": {
                    "name": "i32",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
                {
                  "name": {
                    "name": "y",
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "ty": {
                    "name": "i32",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
              ],
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Move",
              },
            },
            "position": [
              1,
              1,
            ],
          },
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "Write",
              },
              "values": [
                {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "String",
                },
              ],
            },
          },
          {
            "position": [
              1,
              1,
            ],
            "values": {
              "id": {
                "position": [
                  1,
                  1,
                ],
                "type": "ChangeColor",
              },
              "values": [
                {
                  "name": "i32",
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "name": "i32",
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "name": "i32",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: trait Numeric { fn add(other: Self): Self fn mul(other: Self): Self fn zero(): Self } matches snapshot: Declaration: trait Numeric { fn add(other: Self): Self fn mul(other: Self): Self fn zero(): Self } 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "trait": {
        "fns": [
          {
            "name": {
              "name": "add",
              "position": [
                1,
                1,
              ],
            },
            "params": [
              {
                "name": {
                  "name": "other",
                  "position": [
                    1,
                    1,
                  ],
                },
                "ty": {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "Self",
                },
              },
            ],
            "position": [
              1,
              1,
            ],
            "return_type": {
              "position": [
                1,
                1,
              ],
              "type": "Self",
            },
            "type_params": [],
          },
          {
            "name": {
              "name": "mul",
              "position": [
                1,
                1,
              ],
            },
            "params": [
              {
                "name": {
                  "name": "other",
                  "position": [
                    1,
                    1,
                  ],
                },
                "ty": {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "Self",
                },
              },
            ],
            "position": [
              1,
              1,
            ],
            "return_type": {
              "position": [
                1,
                1,
              ],
              "type": "Self",
            },
            "type_params": [],
          },
          {
            "name": {
              "name": "zero",
              "position": [
                1,
                1,
              ],
            },
            "params": [],
            "position": [
              1,
              1,
            ],
            "return_type": {
              "position": [
                1,
                1,
              ],
              "type": "Self",
            },
            "type_params": [],
          },
        ],
        "id": {
          "position": [
            1,
            1,
          ],
          "type": "Numeric",
        },
        "pub": false,
        "type_params": [],
      },
    },
  },
]
`;

exports[`Declaration: import "std" { fn print(msg: String): Void, type String, memory "mem": 1 10 as mem } matches snapshot: Declaration: import "std" { fn print(msg: String): Void, type String, memory "mem": 1 10 as mem } 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "std",
        "imports": [
          {
            "fn": {
              "alias": null,
              "name": {
                "name": "print",
                "position": [
                  1,
                  1,
                ],
              },
              "signature": {
                "param_types": [
                  {
                    "guard": {
                      "position": [
                        1,
                        1,
                      ],
                      "type": "String",
                    },
                    "name": {
                      "name": "msg",
                      "position": [
                        1,
                        1,
                      ],
                    },
                  },
                ],
                "return_type": {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "Void",
                },
              },
            },
            "position": [
              1,
              1,
            ],
          },
          {
            "position": [
              1,
              1,
            ],
            "type": {
              "alias": null,
              "name": {
                "position": [
                  1,
                  1,
                ],
                "type": "String",
              },
            },
          },
          {
            "memory": {
              "alias": {
                "name": "mem",
                "position": [
                  1,
                  1,
                ],
              },
              "max": {
                "int": 10n,
                "position": [
                  1,
                  1,
                ],
              },
              "min": {
                "int": 1n,
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "position": [
                  1,
                  1,
                ],
                "string": "mem",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: import "core" { trait Eq, trait Ord, enum Option, enum Result } matches snapshot: Declaration: import "core" { trait Eq, trait Ord, enum Option, enum Result } 1`] = `
[
  null,
  {
    "ok": {
      "import_dec": {
        "import_from": "core",
        "imports": [
          {
            "position": [
              1,
              1,
            ],
            "trait": {
              "alias": null,
              "name": {
                "position": [
                  1,
                  1,
                ],
                "type": "Eq",
              },
            },
          },
          {
            "position": [
              1,
              1,
            ],
            "trait": {
              "alias": null,
              "name": {
                "position": [
                  1,
                  1,
                ],
                "type": "Ord",
              },
            },
          },
          {
            "enum": {
              "alias": null,
              "name": {
                "position": [
                  1,
                  1,
                ],
                "type": "Option",
              },
            },
            "position": [
              1,
              1,
            ],
          },
          {
            "enum": {
              "alias": null,
              "name": {
                "position": [
                  1,
                  1,
                ],
                "type": "Result",
              },
            },
            "position": [
              1,
              1,
            ],
          },
        ],
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: fn side_effect(x: Int) { print(x) } matches snapshot: Declaration: fn side_effect(x: Int) { print(x) } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "call": [
                    {
                      "name": "print",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    [
                      {
                        "name": "x",
                        "position": [
                          1,
                          1,
                        ],
                      },
                    ],
                  ],
                  "position": [
                    1,
                    1,
                  ],
                },
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "position": [
              1,
              1,
            ],
          },
          "name": {
            "name": "side_effect",
            "position": [
              1,
              1,
            ],
          },
          "params": [
            {
              "guard": {
                "position": [
                  1,
                  1,
                ],
                "type": "Int",
              },
              "name": {
                "name": "x",
                "position": [
                  1,
                  1,
                ],
              },
            },
          ],
          "position": [
            1,
            1,
          ],
          "return_type": null,
          "type_params": [],
        },
        "pub": false,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: fn factorial(n: Int): Int { if n <= 1 { 1 } else { n * factorial(n - 1) } } matches snapshot: Declaration: fn factorial(n: Int): Int { if n <= 1 { 1 } else { n * factorial(n - 1) } } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "expression": {
                  "if_expr": {
                    "cond": {
                      "infix": {
                        "left": {
                          "name": "n",
                          "position": [
                            1,
                            1,
                          ],
                        },
                        "op": "<=",
                        "right": {
                          "int": {
                            "size": 32,
                            "value": 1n,
                          },
                          "position": [
                            1,
                            1,
                          ],
                        },
                      },
                      "position": [
                        1,
                        1,
                      ],
                    },
                    "else_body": {
                      "block": [
                        {
                          "expression": {
                            "infix": {
                              "left": {
                                "name": "n",
                                "position": [
                                  1,
                                  1,
                                ],
                              },
                              "op": "*",
                              "right": {
                                "call": [
                                  {
                                    "name": "factorial",
                                    "position": [
                                      1,
                                      1,
                                    ],
                                  },
                                  [
                                    {
                                      "infix": {
                                        "left": {
                                          "name": "n",
                                          "position": [
                                            1,
                                            1,
                                          ],
                                        },
                                        "op": "-",
                                        "right": {
                                          "int": {
                                            "size": 32,
                                            "value": 1n,
                                          },
                                          "position": [
                                            1,
                                            1,
                                          ],
                                        },
                                      },
                                      "position": [
                                        1,
                                        1,
                                      ],
                                    },
                                  ],
                                ],
                                "position": [
                                  1,
                                  1,
                                ],
                              },
                            },
                            "position": [
                              1,
                              1,
                            ],
                          },
                          "position": [
                            1,
                            1,
                          ],
                        },
                      ],
                      "position": [
                        1,
                        1,
                      ],
                    },
                    "if_body": {
                      "block": [
                        {
                          "expression": {
                            "int": {
                              "size": 32,
                              "value": 1n,
                            },
                            "position": [
                              1,
                              1,
                            ],
                          },
                          "position": [
                            1,
                            1,
                          ],
                        },
                      ],
                      "position": [
                        1,
                        1,
                      ],
                    },
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "position": [
              1,
              1,
            ],
          },
          "name": {
            "name": "factorial",
            "position": [
              1,
              1,
            ],
          },
          "params": [
            {
              "guard": {
                "position": [
                  1,
                  1,
                ],
                "type": "Int",
              },
              "name": {
                "name": "n",
                "position": [
                  1,
                  1,
                ],
              },
            },
          ],
          "position": [
            1,
            1,
          ],
          "return_type": {
            "position": [
              1,
              1,
            ],
            "type": "Int",
          },
          "type_params": [],
        },
        "pub": false,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: fn process(data: List<Int>): Int { let sum = data.fold(0, fn(acc, x) { acc + x }); sum / data.length() } matches snapshot: Declaration: fn process(data: List<Int>): Int { let sum = data.fold(0, fn(acc, x) { acc + x }); sum / data.length() } 1`] = `
[
  null,
  {
    "ok": {
      "fn": {
        "fn": {
          "body": {
            "block": [
              {
                "let_bind": {
                  "assert": false,
                  "expression": {
                    "call": [
                      {
                        "position": [
                          1,
                          1,
                        ],
                        "select": [
                          {
                            "name": "data",
                            "position": [
                              1,
                              1,
                            ],
                          },
                          {
                            "name": "fold",
                            "position": [
                              1,
                              1,
                            ],
                          },
                        ],
                      },
                      [
                        {
                          "int": {
                            "size": 32,
                            "value": 0n,
                          },
                          "position": [
                            1,
                            1,
                          ],
                        },
                        {
                          "fn": {
                            "body": {
                              "block": [
                                {
                                  "expression": {
                                    "infix": {
                                      "left": {
                                        "name": "acc",
                                        "position": [
                                          1,
                                          1,
                                        ],
                                      },
                                      "op": "+",
                                      "right": {
                                        "name": "x",
                                        "position": [
                                          1,
                                          1,
                                        ],
                                      },
                                    },
                                    "position": [
                                      1,
                                      1,
                                    ],
                                  },
                                  "position": [
                                    1,
                                    1,
                                  ],
                                },
                              ],
                              "position": [
                                1,
                                1,
                              ],
                            },
                            "name": null,
                            "params": [
                              {
                                "guard": null,
                                "name": {
                                  "name": "acc",
                                  "position": [
                                    1,
                                    1,
                                  ],
                                },
                              },
                              {
                                "guard": null,
                                "name": {
                                  "name": "x",
                                  "position": [
                                    1,
                                    1,
                                  ],
                                },
                              },
                            ],
                            "position": [
                              1,
                              1,
                            ],
                            "return_type": null,
                            "type_params": [],
                          },
                          "position": [
                            1,
                            1,
                          ],
                        },
                      ],
                    ],
                    "position": [
                      1,
                      1,
                    ],
                  },
                  "pattern": {
                    "name": "sum",
                    "position": [
                      1,
                      1,
                    ],
                  },
                },
                "position": [
                  1,
                  1,
                ],
              },
              {
                "expression": {
                  "infix": {
                    "left": {
                      "name": "sum",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    "op": "/",
                    "right": {
                      "call": [
                        {
                          "position": [
                            1,
                            1,
                          ],
                          "select": [
                            {
                              "name": "data",
                              "position": [
                                1,
                                1,
                              ],
                            },
                            {
                              "name": "length",
                              "position": [
                                1,
                                1,
                              ],
                            },
                          ],
                        },
                        [],
                      ],
                      "position": [
                        1,
                        1,
                      ],
                    },
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
                "position": [
                  1,
                  1,
                ],
              },
            ],
            "position": [
              1,
              1,
            ],
          },
          "name": {
            "name": "process",
            "position": [
              1,
              1,
            ],
          },
          "params": [
            {
              "guard": {
                "app": {
                  "args": [
                    {
                      "position": [
                        1,
                        1,
                      ],
                      "type": "Int",
                    },
                  ],
                  "callee": {
                    "position": [
                      1,
                      1,
                    ],
                    "type": "List",
                  },
                },
                "position": [
                  1,
                  1,
                ],
              },
              "name": {
                "name": "data",
                "position": [
                  1,
                  1,
                ],
              },
            },
          ],
          "position": [
            1,
            1,
          ],
          "return_type": {
            "position": [
              1,
              1,
            ],
            "type": "Int",
          },
          "type_params": [],
        },
        "pub": false,
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Declaration: builtin "i32.add" as i32_add(a: I32, b: I32): I32 matches snapshot: Declaration: builtin "i32.add" as i32_add(a: I32, b: I32): I32 1`] = `
[
  null,
  {
    "ok": {
      "builtin": {
        "alias": {
          "name": "i32_add",
          "position": [
            1,
            1,
          ],
        },
        "name": {
          "position": [
            1,
            1,
          ],
          "string": "i32.add",
        },
        "params": [
          {
            "guard": {
              "position": [
                1,
                1,
              ],
              "type": "I32",
            },
            "name": {
              "name": "a",
              "position": [
                1,
                1,
              ],
            },
          },
          {
            "guard": {
              "position": [
                1,
                1,
              ],
              "type": "I32",
            },
            "name": {
              "name": "b",
              "position": [
                1,
                1,
              ],
            },
          },
        ],
        "return_type": {
          "position": [
            1,
            1,
          ],
          "type": "I32",
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Edge case: foo() matches snapshot: EdgeCase: foo() 1`] = `
[
  null,
  {
    "ok": {
      "call": [
        {
          "name": "foo",
          "position": [
            1,
            1,
          ],
        },
        [],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Edge case: #() matches snapshot: EdgeCase: #() 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "tuple": [],
    },
  },
]
`;

exports[`Edge case: #{} matches snapshot: EdgeCase: #{} 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "record": [],
    },
  },
]
`;

exports[`Edge case: MyEnum matches snapshot: EdgeCase: MyEnum 1`] = `
[
  null,
  {
    "ok": {
      "position": [
        1,
        1,
      ],
      "type": "MyEnum",
    },
  },
]
`;

exports[`Edge case: a(b(c(d(e())))) matches snapshot: EdgeCase: a(b(c(d(e())))) 1`] = `
[
  null,
  {
    "ok": {
      "call": [
        {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        [
          {
            "call": [
              {
                "name": "b",
                "position": [
                  1,
                  1,
                ],
              },
              [
                {
                  "call": [
                    {
                      "name": "c",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    [
                      {
                        "call": [
                          {
                            "name": "d",
                            "position": [
                              1,
                              1,
                            ],
                          },
                          [
                            {
                              "call": [
                                {
                                  "name": "e",
                                  "position": [
                                    1,
                                    1,
                                  ],
                                },
                                [],
                              ],
                              "position": [
                                1,
                                1,
                              ],
                            },
                          ],
                        ],
                        "position": [
                          1,
                          1,
                        ],
                      },
                    ],
                  ],
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            ],
            "position": [
              1,
              1,
            ],
          },
        ],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Edge case: ((((a)))) matches snapshot: EdgeCase: ((((a)))) 1`] = `
[
  null,
  {
    "ok": {
      "name": "a",
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Edge case: foo().bar + baz().qux * 2 matches snapshot: EdgeCase: foo().bar + baz().qux * 2 1`] = `
[
  null,
  {
    "ok": {
      "infix": {
        "left": {
          "position": [
            1,
            1,
          ],
          "select": [
            {
              "call": [
                {
                  "name": "foo",
                  "position": [
                    1,
                    1,
                  ],
                },
                [],
              ],
              "position": [
                1,
                1,
              ],
            },
            {
              "name": "bar",
              "position": [
                1,
                1,
              ],
            },
          ],
        },
        "op": "+",
        "right": {
          "infix": {
            "left": {
              "position": [
                1,
                1,
              ],
              "select": [
                {
                  "call": [
                    {
                      "name": "baz",
                      "position": [
                        1,
                        1,
                      ],
                    },
                    [],
                  ],
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "name": "qux",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
            "op": "*",
            "right": {
              "int": {
                "size": 32,
                "value": 2n,
              },
              "position": [
                1,
                1,
              ],
            },
          },
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Edge case: (a + b)(c, d) matches snapshot: EdgeCase: (a + b)(c, d) 1`] = `
[
  {
    "position": [
      1,
      1,
    ],
    "symbol": ")",
  },
  {
    "ok": {
      "infix": {
        "left": {
          "name": "a",
          "position": [
            1,
            1,
          ],
        },
        "op": "+",
        "right": {
          "name": "b",
          "position": [
            1,
            1,
          ],
        },
      },
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Match with guard: match x { Some(y) if (y > 0) => y, _ => 0 } matches snapshot: MatchWithGuard: match x { Some(y) if (y > 0) => y, _ => 0 } 1`] = `
[
  null,
  {
    "ok": {
      "match": [
        {
          "name": "x",
          "position": [
            1,
            1,
          ],
        },
        [
          {
            "body": {
              "name": "y",
              "position": [
                1,
                1,
              ],
            },
            "guard": {
              "infix": {
                "left": {
                  "name": "y",
                  "position": [
                    1,
                    1,
                  ],
                },
                "op": ">",
                "right": {
                  "int": {
                    "size": 32,
                    "value": 0n,
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
              },
              "position": [
                1,
                1,
              ],
            },
            "pattern": {
              "constr": {
                "patterns": [
                  {
                    "name": "y",
                    "position": [
                      1,
                      1,
                    ],
                  },
                ],
                "type": {
                  "position": [
                    1,
                    1,
                  ],
                  "type": "Some",
                },
              },
              "position": [
                1,
                1,
              ],
            },
          },
          {
            "body": {
              "int": {
                "size": 32,
                "value": 0n,
              },
              "position": [
                1,
                1,
              ],
            },
            "guard": null,
            "pattern": {
              "name": "_",
              "position": [
                1,
                1,
              ],
            },
          },
        ],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Match with guard: match point { #(x, y) if (x == y) => x, #(x, _) => x, _ => 0 } matches snapshot: MatchWithGuard: match point { #(x, y) if (x == y) => x, #(x, _) => x, _ => 0 } 1`] = `
[
  null,
  {
    "ok": {
      "match": [
        {
          "name": "point",
          "position": [
            1,
            1,
          ],
        },
        [
          {
            "body": {
              "name": "x",
              "position": [
                1,
                1,
              ],
            },
            "guard": {
              "infix": {
                "left": {
                  "name": "x",
                  "position": [
                    1,
                    1,
                  ],
                },
                "op": "==",
                "right": {
                  "name": "y",
                  "position": [
                    1,
                    1,
                  ],
                },
              },
              "position": [
                1,
                1,
              ],
            },
            "pattern": {
              "position": [
                1,
                1,
              ],
              "tuple": [
                {
                  "name": "x",
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "name": "y",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
          },
          {
            "body": {
              "name": "x",
              "position": [
                1,
                1,
              ],
            },
            "guard": null,
            "pattern": {
              "position": [
                1,
                1,
              ],
              "tuple": [
                {
                  "name": "x",
                  "position": [
                    1,
                    1,
                  ],
                },
                {
                  "name": "_",
                  "position": [
                    1,
                    1,
                  ],
                },
              ],
            },
          },
          {
            "body": {
              "int": {
                "size": 32,
                "value": 0n,
              },
              "position": [
                1,
                1,
              ],
            },
            "guard": null,
            "pattern": {
              "name": "_",
              "position": [
                1,
                1,
              ],
            },
          },
        ],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;

exports[`Match with guard: match value { n if (n < 0) => -n, n if (n > 100) => 100, n => n } matches snapshot: MatchWithGuard: match value { n if (n < 0) => -n, n if (n > 100) => 100, n => n } 1`] = `
[
  null,
  {
    "ok": {
      "match": [
        {
          "name": "value",
          "position": [
            1,
            1,
          ],
        },
        [
          {
            "body": {
              "position": [
                1,
                1,
              ],
              "prefix": {
                "op": "-",
                "operand": {
                  "name": "n",
                  "position": [
                    1,
                    1,
                  ],
                },
              },
            },
            "guard": {
              "infix": {
                "left": {
                  "name": "n",
                  "position": [
                    1,
                    1,
                  ],
                },
                "op": "<",
                "right": {
                  "int": {
                    "size": 32,
                    "value": 0n,
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
              },
              "position": [
                1,
                1,
              ],
            },
            "pattern": {
              "name": "n",
              "position": [
                1,
                1,
              ],
            },
          },
          {
            "body": {
              "int": {
                "size": 32,
                "value": 100n,
              },
              "position": [
                1,
                1,
              ],
            },
            "guard": {
              "infix": {
                "left": {
                  "name": "n",
                  "position": [
                    1,
                    1,
                  ],
                },
                "op": ">",
                "right": {
                  "int": {
                    "size": 32,
                    "value": 100n,
                  },
                  "position": [
                    1,
                    1,
                  ],
                },
              },
              "position": [
                1,
                1,
              ],
            },
            "pattern": {
              "name": "n",
              "position": [
                1,
                1,
              ],
            },
          },
          {
            "body": {
              "name": "n",
              "position": [
                1,
                1,
              ],
            },
            "guard": null,
            "pattern": {
              "name": "n",
              "position": [
                1,
                1,
              ],
            },
          },
        ],
      ],
      "position": [
        1,
        1,
      ],
    },
  },
]
`;
